You can change the names or edit as you like, to fit your needs. After creating the class-maps i'll create the policy-map. It defines the priority of the DSCP value and sets the bandwidth in the different queues, after it matches a DSCP value. 

For Cisco hardware, the stack concept is the same for all ranges of switches. You typically always stack Switch 1, port A to Switch 2, port B and then Switch 1, port B to Switch 2, port A. Illustrations: 

As per comment from Ron Trunk i'll post this answer: Depending on what kind of access point and the underlying network design/topology a rule of thumb is 15-25 but if its just web and email traffic you can have more. Just remember that you should have a gigabit port on the AP. Also wireless is half duplex when you are calculating per device throughput. If you also enable 802.11n/ac that can cause your gigabit port on the AP to be your bottleneck. So you also have to take into account how many APs will connect to a switch and how the connection is from that switch back to your core. Now for 50 some users/devices, I would, as written by Ron Trunk have at least 2-3 APs in that area and design that area for high density. 

If you want to setup logging for your switch, assuming you have a syslog server of some sort, you can use this configuration on the switch: 

The problem is due to a Cisco bug CSCuq60111. Since the bug tool is not for everyone i will post the solution from Cisco here: Incorrect Type 1 vPC consistency for "vPC card type" in Enhanced vPC CSCuq60111 Description Symptom: 

To verify your configuration and to see that queueing is being performed you can use the following command (you might need to shut/no shut the interface for it to take effect): 

TCP/IP is a protocol stack which contains different protocols required for the data transfer from sender to receiver. TCP - Layer 4 protocol which ensures reliability and is connection oriented. TCP/IP is also a layered protocol but does not use all of the OSI layers, though the layers are equivalent in operation and function (Fig. 2). The network access layer is equivalent to OSI layers 1 and 2. The Internet Protocol layer is comparable to layer 3 in the OSI model. The host-to-host layer is equivalent to OSI layer 4. These are the TCP and UDP (user datagram protocol) functions. Finally, the application layer is similar to OSI layers 5, 6, and 7 combined. 

Searching for this lead me to believe that the Cisco IOS File System (IFS) saves some persistent date (variables) about the Cisco image in the NVRAM. This data is used upon booting the switch or router. 

As an example if you want to log ICMP (ping) on your switch then you can send the log directly to the local buffered log on the switch and you can setup a syslog destination to receive the log from the switch. First of an access-list and this is all based on Cisco. 

As per OP's comment, here's a copy of the post from on Cisco support forums, which turned out to be a better solution. This is strictly copy/paste from Cisco support forums and has not been made by me. It's only to give someone else a hint to a solution. oleg.bogdanov wrote: Note that my platform is a 4451 with a SM-X-ES3-24-P, but it should be the same in your case. The 4000 series supports SVIs as of recent code. You enable SVI support like this: 

The 4000 Series routers are all using the Quantumflow Processor from the ASR1000 Series router. This is a Multi-core CPU with very significant routing capability. This is the only way Cisco can deliver iWAN and NBAR/AVC to branch offices. AVC has the ability to check the classification of traffic based on Layer-4 and higher characteristics, so the traffic can be identified and prioritized for what it is. You no longer have to just throw all HTTP and HTTPS into DSCP AF21. You can rip Facebook out of AF21 and put it in CS1 where it belongs, even though its encrypted - thanks to AVC. (AVC: $URL$ Obviously, tearing that deeply into packets requires serious CPU power, which is where that Multi-core CPU comes in. It has so much horsepower they have to rate-limit it in software, which is why after so many years of preferring not to talk about maximum throughput, they are suddenly publishing throughput recommendations for these routers in the public specification sheets. 

You always connect fibers vertically in a patch panel, so that fiber 1 and 2 are set together as a pair. 

What you are asking will not be possible without a layer 3 switch or router. You cannot connect two separate networks with different IP addresses with a layer 2 switch. Moreover connecting a cable between 2 different VLANs pretty much destroys the purpose of the VLAN in the first place. Why not put it all in the same VLAN then? It also pose a security risk to do so as all traffic from both VLANs will flow freely between them. 

We tell BGP to use IP source address of with a destination of If you don't specify the update-source the source will be that of the outgoing interface to as in the IP routing table on the local-node (King). However, BGP cannot know if you actually wish to peer your iBGP neighbor with a loopback address or just with the address of your physical interface that is used to reach that neighbor. Your network topology may be so simple that you have only one interface that goes towards your iBGP neighbor so in that case, requiring you to configure and advertise a loopback would simply be a formal and useless burden. You can configure an iBGP neighbor by specifying any of it's existing IP addresses that is reachable. However, when you - as a router - decide which interface your BGP packet will go out off to reach the neighbor, that interface will be put into the packet's source IP address field. So as for 'Kong': As long as the path (via the physical FastEthernet and Serial) to the loopback interfaces exist, they will always be reachable. By default, BGP will use the highest IP address assigned to a loopback interface as the BGP router-id. If there is no looback configured, BGP will use the highest IP address on any given interface. 

Then you have to reboot and you can just trunk your VLANs to the switch module like you would on any layer 3 switch: 

To remark the traffic on the 6500 Series you need to create new class-maps and a new policy-map. The class-maps are not created as lan-queues and the match statement is match-any=OR instead of match-all as we want to check multiple values one after one. So if the first value does not match the packet, the next one will be checked and so forth. I want to point out that this is where we had to involve Cisco TAC, because the following bug came up: $URL$ We had to change the class-maps from matching on AF values to raw DSCP values (discard-class) instead. We also had to upgrade the switch to version 152-1.SY5 (MD). After we followed these directions we've not had any problems since. The configuration is as follows: 

Auto-QoS uses AF (Assured Forwarding) values for DSCP marking. Enabling Auto-QoS on the access switch Global configuration 

Now check the log by using the command show logging and see if a filter gets applied to the interface. Depending on what actually made or make the broadcast storm happen, the first thing i would do is remove the connection on the port, where the storm is detected and start by checking the physical setup. Could it be a loop on your network? Faulty NIC? Loop through a PC to wireless? Most common, in my opinion, is an unmanaged switch connected to the same switch in two different ports creating the loop. 

Nexus 9000 series HSRP configuration guide: $URL$ As rnxrx has correctly mentioned in the comment, there's a difference between the Nexus switches and what basic features are supported. Therefore i've added the below license matrix for all Nexus switches and all licenses possible to add: $URL$ 

If your only connection between the office is over the internet then you have no choice but to run a VPN. It would be much simpler if you had a fiber or Ethernet connection to interconnect them. Unless you have a security reason, for instance a central internet content filter or something, I would let the branch offices directly access the internet and only run the office to office traffic thought a VPN. A VPN requires a router or a gateway with built-in VPN functionality. You'll find most VPN solutions also support remote access to users outside of the office; for example, when your employees use WiFi hotspots at hotels, airports, or even their home. This requires that their computer or mobile device supports the same VPN method as your company's VPN solution. Here are the main VPN protocols or methods you'll find: PPTP: Generally the least secure method. However for providing remote access to users outside of your offices, PPTP is natively supported on Windows and most other operating systems and mobile devices. But there can be connection issues when employees connect from networks that don't allow VPN pass-through. L2TP/IPsec: Better security than PPTP, but usually more complicated to setup. For providing remote access to users outside of your offices, it's natively supported on most computers and mobile devices but also has similar connection issues to PPTP. SSL: Typically designed for providing remote VPN access to users outside of your offices, not connecting entire networks. The connection is made via a Web browser and doesn't require a VPN client on the computer or device. OpenVPN: Typically only included on routers with an open source firmware or operating system. To provide remote access to users outside of your offices, users would have to have an OpenVPN client installed on their device, since it's not natively supported by Windows, Mac OS X, or mobile devices. But it doesn't suffer from the connection issues PPTP and L2TP/IPsec do. Cisco EasyVPN: Easy VPN is a hub-and-spoke VPN topology that can be used with a variety of routers, PIX, and ASA devices. Policies are defined mostly on the hub and pushed to remote spoke VPN devices, ensuring that clients have up-to-date policies in place before establishing a secure connection. Easy VPN simplifies VPN deployment for remote offices. With Easy VPN, security policies defined at the head end are pushed to remote VPN devices, ensuring that clients have up-to-date policies in place before establishing a secure connection. There are many network routers (wired and wireless) that have VPN functionality built-in, which can also be called VPN gateways or VPN firewalls. These are great for long-term reliable use, and they require minimal effort. They usually also support remote connections for employees who want VPN access when out of the offices. Cisco configuration examples. IPsec $URL$ $URL$ EasyVPN $URL$ $URL$ 

Now connect stack cables port 1 master to port 2 slave and port 1 slave to port 2 master. Slave will now reboot and the stack is formed. 

PortFast causes a switch or trunk port to enter the spanning tree forwarding state immediately, bypassing the listening and learning states. You can use PortFast on switch or trunk ports that are connected to a single workstation, switch, or server to allow those devices to connect to the network immediately, instead of waiting for the port to transition from the listening and learning states to the forwarding state. When the switch powers up, or when a device is connected to a port, the port enters the spanning tree listening state. When the Forward Delay timer expires, the port enters the learning state. When the Forward Delay timer expires a second time, the port is transitioned to the forwarding or blocking state. When you enable PortFast on a switch or trunk port, the port is immediately transitioned to the spanning tree forwarding state. To prevent loops from occurring in a network, the PortFast mode is supported only on nontrunking access ports because these ports typically do not transmit or receive BPDUs. The most secure implementation of PortFast is to enable it only on ports that connect end stations to switches. Because PortFast can be enabled on nontrunking ports connecting two switches, spanning tree loops can occur because BPDUs are still being transmitted and received on those ports. Spanning-Tree Configuration guide: $URL$ When people talk about networks, they often refer to computers that are at the edge of the network as hosts, end stations, workstations, or servers. Its all just the same thing, a computer attached to the network; though the word HOST has the most general meaning and can include anything attached to the network including hubs, bridges, switches, routers, access points, firewalls, workstations, servers, mainframes, printers, scanners, copiers, fax machines and more. 

Some extra options might need to be added to the command. Source from Cisco "Understanding Etherchannel load balancing" 

To create QoS and policy-maps we need to find out, what queueing model a module is using. In the example below the Ingress and Egress queue is the same, but on some modules the Rx and Tx queues are different and therefore you will need to create policy-maps in accordance to how the queueing model is. To find out what queueing model an interface is using, you need to issue the following command. The below example is based on the module: C6800-16P10G 

James F. Kurose, Keith W. Ross are writing about theoretical throughput, which means if everything is fault free and at it's optimal, then you could theoretical get 83,333 segments per second at 100 ms RTT. In order to calculate the PPS capabilities of a device, the best way is using the throughput ratings on the spec sheets. Remember the result is just theoretical: 

The star symbol besides the software indicates that Cisco has marked it as safe harbor and therefore is safe to use. You should always stick to safe harbor software. 

It depends, if the VTP server is running version 2, it will automatically set all clients to version 2. If that is not possible, the client will not work and it will stand as a mismatch. You cannot change VTP version on a client, as the server will force the version of what it is running. VTP version 3 supports all the features in version 1 and version 2. VTP version 3 also supports the following features not supported in version 1 and version 2: 

You cannot delete nor read these two files as they strictly belong to the IOS system on your switch or router. Those files do not contain anything sensitive. It is strictly system information that has no relation to any configuration. Update: OK so i've been searching all over for this and i found this thread: $URL$ There's an error generating the following message: 

Solutions could be a Network specifically designed for your organization or company. A complete network (plug and play) that supports your needs with up-to-date standards, features and securities. Solutions could also be smaller parts of that, for instance, if you only need VoIP for your company, then you can buy a plug and play VoIP solution. A network service is an application running at the network application layer and above, that provides data storage, manipulation, presentation, communication or other capability which is often implemented using a client-server or peer-to-peer architecture based on application layer network protocols. You could say, that a network solution is the infrastructure that you implement your network service on. 

Note:- Fex interfaces will go offline when uplinks are disabled on both vpc peers Further Problem Description: This behavior does not affect functionality of FEX or Host connected to HIF interfaces. 

I hope someone might be able to shed some light over this. Thanks in advance. Update 17-01-2018: How to match and remark input traffic into dscp classes of your choice. 

Disabled State A LAN port in the disabled state does not participate in frame forwarding or STP. A LAN port in the disabled state is virtually nonoperational. A disabled LAN port performs as follows: 

Conditions: While configuring enhanced vPC on Nexus 6000 for first time or when recent reload has performed on both peers. We may see "vPC card type" Value mismatch on vpc peers. - Expected output is