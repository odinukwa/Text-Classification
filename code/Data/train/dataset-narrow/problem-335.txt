After the election, the non root switches can have one of these links: a. in designated state - the one which is that is used to connect to the root b. Forwarding - literal meaning , not connected to the root, but forwards packets c. blocked - the link that could potentially cause loops and thus is blocked.(cannot send but can receive packets) Hope it clears your doubts .. 

This is because of IP fragmentation. How about you check if the fragment bit is set ? (you can find it in the packet headers ) If it is you can concatenate / cascade the packets before applying regex. If not then you can apply regex on the individual packet 

I have a very rudimentary doubt. We know that a LAN has addresses in the same subnet. The LAN ends at the gateway router with that interface also belonging to the same subnet. But what exactly will break in the forwarding operation if we assign LAN addresses that belong to different subnets. 

How the data will flood (if it will) depends on the design. If there it is a complete L2 network, then by the routes on the host it will forward the packets to the gateway. For that it needs the MAC of the gateway. If both gateways have the same IP, then the gateway that replies first for the ARP is selected. If they have different Ip then the gateway that is configured at the host will reply. In the layer 3 network. it depends on the discretion of the routing protocol. If BGP is used than the admin has the flexibility of choosing the gateway. 

Thus, if we can have window size = bandwidth * RTT, then utilization is equal to bandwidth. Now apart from the maths, Try to understand why this is the case. The TCP has to wait a time equal to RTT, before transmitting again, This is how TCP works. So the only way we can control utilization is by sending the number of packets at a time on the link. If we want to transmit at full bandwidth for continuously for RTT units of time but we cannot pump data continuously so we send bandwidth * RTT units of data together. Thus to for utilization = bandwidth --> window size = bandwidth * RTT 

You have basically asked the election process :p So, here is what happens. All switches that have STP enabled (which is defaut setting in most switches), send out BPDU's. What the BPDU mainly contains is this : a. the ID of that switch b. The ID of the root according to that switch (At the beginning of the process every switch thinks it is the root). As Ron pointed out, This is sent on a link local address which means that it will be sent to all the devices that are directly connected to the switch. (Yes even end devices like desktops can receive this message but they will discard the packet as STP is not enabled on them) Now as a switch when you receive the packet from all your neighboring switches, here is what you do, you compare their ID with your ID. One of the two things can happen - your ID lower than their ID in that case you still think you are the root or you find out that your ID is not the lowest. So in the next BPDU packet you will replace the root ID with the the ID of that device. Now this process continues till all the devices unanimously agree as to which device is the root. At this point the election stops and the root is elected. I dont fully understand by what you mean by upward / downward packets, but after the root is elected all switches send their BPDU packets before the dead time to the root (in RSTP not very sure about this) and the root sends its (STP and RSTP). if any device fails to reeive the hello packets before the dead interval there is a re election which I am not mentioning in detail here 

The router is not aware how the topology is in that area or if the ABR is directly connected to the other router. This is because when an ABR sends LSA type 3, It only sends the necessary information necessary to enable communication. In a way it summarises the routes. Hence the name summary LSA **From what I've learnt, ABR summarises the area but when I get into the database of a router in a particular area, I see there is info about all the routers present in another area rather than the network summarisation. So what does LSA type 3 actually contain sent by the ABR?* The information about all the routers have to be there, otherwise how can we ensure connectivity between all users in the network. As to what exactly does LSA 3 contain. You can check a wireshark packet at packetlife.com or create a network yourself on GNS3. But for understanding purposes, what the ABR packet says is: I can reach this network or this address and the cost will be XX. But it does not tell how will it reach the network. Or where is the network. when does the ABR send LSA type 3 A router will be an ABR when it is connected to area 0 and some other area. So it will have OSPF running on multiple interfaces one of them will be in area 0. Other interfaces can belong to any area. Now consider only area 0. In area 0 the ABR will send LSA 1 and 2 like all other routers to have the complete information of the topology. Let the other area be area 1, On the interface connected to area 1, the ABR will sned and recieve LSA 1 and 2 to get the entire view of area 1. Now the summarise area 0 and send 1 LSA type 3 to area 1 Similarly it will summarise area 1 and send one LSA type 3 in area 0. For a better understanding see this video on OSPF areas here To clarify stuff, by having a topology view I mean a router will know where an interface of a given router is connected to. 

Why LSA type 3 is called summary LSA As you are already aware, In OSPF routers are divided into areas. Routers within the area know all the information about the fellow router through LSA 1 and 2. This database is fairly detailed as the router can interpret the entire topology of the area using the LSAs. On the contrary the only infomation available to the router for router in other area is: 

command lists the local preference of each of the learnt routes. I understand the default is 100. However for some routes, it is explicitly stated as 100 while for others it is simply blank. Why this discrepancy. Secondly I have confusion on how local preference works. Is local preference set for a neighboring router, for an neighboring AS or it is set per router interface. I know it is local per router and hence not propagated, but on what basis is it assigned to ? 

Any router by default runs data path for layer 1,2 and 3 while it runs control plane for all the 5 layers. You cannot skip a layer in the data path at a router. However, seeing your question you want a router that does no do switching. This is definately possible. How the forwarding takes place, depends on the lookup table it refers to. If it refers to the L3 forward table, it will be routing and if it refers to the L2 forwarding table it will do switching 

Port forwarding is generally a technique that is used with network address translation and specifically DNAT. Suppose there is an enterprise which has 2 servers 1 which accepting connections for SSH (port 22) and one is acting as web browser(port 80). The enterprise is using a single public IP and further uses NAT for its 2 servers. Now, one host that has never contacted this server tries to communicate with the web server. Routing in the internet is always through public IP so using the enterprise IP the packet will reach the gateway router. Now imagine the routing table for the gateway router. It has received packet which has a destination IP of its own interface. where does it send the packet now or rather how will it know it needs to send the packet to its web server which is defined behind the NAT. For this we need port forwarding. This is basically saying whenever you get a packet with Dport 80 simply send it out of that interface. Note that we were now unable to distinguish hosts based on IP addresses so now we are using ports to distinguish them. 

I am trying to implement and test BGP in a lab environment. Due to some error, I have assigned wrong AS numbers to the routers and I would like to change that. Simply running the same commands with the correct configuration does not work. I have also tried to reset the BGP connection. But that resets the peers and not the router settings. Is there a way to simply remove any ad all BGP configurations that are present on teh router and such that the router will then have no instabnce of BGP running and I can start afresh with the configurations? 

Yes, dependin upon the implementation protocol such as selective repeat or go-back N, will result in re-transmission. However ack and data packet are completely different entities. 1. loss of ack will cause a re transmit because the timer at the sender will expire and force the client to send again. However the receiver already has this packet, and needs to discard the packet as duplicate. If the data packet it self was lost, re transmission would still occur but this time the receiver actually does not have a packet. Both deal with expiration of a timer, so you migh have been confused. But ack and data packet have completely different use. Later when you study the TCP protocol you will see that data packet consumes a sequence number while ack packet does not. So both cannot be generalized as one. 

when STP is used in a switch topology it allows 3 ports: root port: It is the port which connects the switch to the root port (I am assuming you know how the root port selection works) Blocked and forwarding port: The basic property of forwarding port is that it can receive BPDU's but not send them. Now consider an example where the one of the switch is down STP needs to be converged. If both the ports of a link are down, both ports will wait for the convergence information(that is the information needed for the selection of the new root port) but none will be able to send it. thus both links cannot be blocked. I encourage you to read about STP time outs and how convergence process works 

To add to the answer by @Ron Trunk. The good , best or bad practises depend largely on your network​ and cannot be generalised as one common solution . In the two examples that you have provided, what if the number of Vlans in the network are around 10. The data is in mostly in the form of bursts and no vlan requires high link utilization continuously. Sharing a link makes sense here . On the contrary consider a data center topology where these vlans are used to isolate server traffic . Considering the high volume of S-N traffic, there are chances of over subscribing the link. In this case, even a single vlan may be provided with dedicated links to reduce latency and questing delays. The best practises are at the discretion of the network Administrator and the scenerio at hand . 

2 VLANS are different broadcast domains They are meant not be able to communicate with each other at layer 2. To make devices in different VLANS communicate you need a layer 3 device. Now, to achieve this, you can use your switch 2 - as labelled in the figure attached. you need to create 2 virtual interfaces. Assign IPs to those virtual interfaces. Add routes on your device - either static or through some routing protocol. And finally set the virtual inteface as the default gateway for the devices (PC's in the diagram). Also the used VLANs should be allowed on the link. That is either set a native VLAN or make the links as trunk. Alternatively you can skip the switch all together and use the router. These steps are not comprehensive, But a general idea of what has to be done. Basic principle is you need layer 3 forwarding for inter vlan communication 

Where does it use switch ports ? For transit routes ? for peering ? At route exchange points ? In general layer 2 ports are plug and play and do not need any explicit protocols to run. Hence preferred when the target is to lower overhead and CPU utilization caused due to various routing protocols and when unnecessary broadcass can be tolerated i.e in smaller networks. Secondly VLANs can provide isolation and basically split the LAN in different broadcast domain so can sometimes be as layer 3 instances. But these instances are logical and have obvious limitations. 

You can check a couple of things. 1 check if the packet you have constructed is correct. I mean offsets, header length etc. Because if not, the recipient will simply discard it 2 check if the packet is actually reaching the destination. Try tcpdump on the recipient. 3 once you know the packet is correct. Check other troubleshoot at other layers. Like if the host is doing an arp for dmac or are you supplying it in the packet. If arp, then does the destination reply. If manual is it the correct value. Does the sender have a route to destination. Does the destination have a return route. There are many possibilities if you post the outcome of above scenerios someone here can help you 

Yes you can give default route for each vlan on the switch . You will need a later 3 interface on the switch . Once u create a layer 3 interface for a specific vlan assign an IP ADDRESS to it in the same subnet as the host in the vlan. Once done add that ip as the default gw for the host . Now on the switch , add static routes (or routing protocols) Based on the network topology and you can achieve inter vlan communication. Though I can't understand how using a router can create such large descrepencies in the throughout 

This is an example of adding a flow to the switch. In your show command the n_packets and n_bytes denote how many packets/bytes are effected by this flow. you can think of as a rule based on which the OVS will forward packets. 

As Ron pointed out the switch encapsulates the data from the router. You can use this for your reference: information generated at the application layer (for instance this web browser) is called data. the transport layer encapsulates it and calls segment At network layer it is a called a packet A frame at the data link layer and at the physical layer they are just bits transmitted through various mechanisms. 

where [N] for non active. Why are they non active. Going by the administrative distance AD of static route is 1. There shoudnt be any overwrite for it in the FIB 

I have a very rudimentary doubt. I am sure missing something but cant recollect what. Suppose we have 2 hosts connected on 2 interfaces of a switch. if host 1 pings host 2 , it will first send an ARP request for host 2, host 2 will reply and it will be entered in the ping packet. BUT, we dmac is always of the next hop of the packet. In this case the next hop of the packet is the switch interface, so why dmac of the host and not the switch. Is it that next hop concept is used in routers and not in switches ? 

Subnets are for routing tables for longest prefix match. But an IP packet in itself has no notion of subnets. so you cannot assign same IP addresses with different subnets. 

Yes, it is possible. You can manually set your name server in your box. You have to connect to a same server that has a capability of deep packet inspection such that the DNS reply depends on the layer 2 ether VLAN field. It is unlikely that you will find such a name server unless configured by your ISP. So the solution is set up your own and send queries to that server. You might also want to clear the DNS cache in your browser or PC. 

Link aggregation works under specific scenerio: If the switch has 1 host connected to it with ingress traffic at 100 mbps. Now at the egress port has 5 links connected through etherchannel capable of providing 1gbps. You will still find your speed stuck at 100 because the ma incoming traffic is 100 mbps. Secondly, load balancing takes place based on several parameters, if the parameter is source ip and you have just one host, in your case while copying files, you will not see significant increase because the source of all packets is the same. Hope this helps.