From the cisco docs i have: "vPC and HSRP/VRRP Object Tracking As Figure 67 suggests, it’s important not to use HSRP/VRRP link tracking in a vPC configuration. Assume HSRP/VRRP object tracking is configured on both vPC peer devices and L3 uplink failure occurs on switch 7K2. This event triggers the HSRP/VRPP object tracking and the resulting SVI with associated HSRP/VRRP configuration is set to DOWN state. So everytime 7K2 receives a frame destined to HSRP/VRRP vMAC, it bridges this frame over vPC peer-link because the other vPC peer device is able to process this frame (as SVI with associated HSRP/VRRP configuration is still in UP state). Using vPC with HSRP/VRRP object tracking may leads to traffic blackholing in case object tracking is triggered: the reason is that vPC systems will not forward a packet back on a vPC once it has crossed the peer-link (because of the vPC loop avoidance rule), except in the case of a remote vPC member port failure. " Refer the attached image: 

There is a vPC domain, with vPC 20 for Sw2 and vPC 10 for Sw1. vPC peer link exists between NxOS1 and NxOS2. Suppose, Sw2 sends broadcast traffic.This broadcast traffic (after hashing) will choose any of the links while going upstream to NxOS1. Now the broadcast traffic is received on NXOS1. NxOS1 sends broadcast traffic to all ports except port20. Hence, NxOS1 will send the traffic egress via Port 10 and the Peer link. Now, the NxOS2 receives the traffic, it knows what was the status of port 10 and port 20 of NxOS1 (via CFS protocol). So, NxOS2 knows that SW1 might have received traffic from NxOS1 via Port 10 of NxOS1. NxOS2 also knows that (via CFS protocol) the broadcast traffic would have come to NxOS1(on port 20) from SW2. (I believe when the port channel is established, the system-mac of Sw2 is known to both NxOS1 and NxOS2). Hence, NxOS2 DOES NOT further send broadcast traffic(in egress direction downstream) on port 20 and port 10 of NxOS2. Q1:Please validate if my above understanding is correct. Q2:Here, CFSoE is playing a great role(for mac address synchronisation).What would happen if CFSoE stops working(assume peer link goes down)? Even then how would loop occur in above scenario? 

Setting up storm-control on your switch will allow the switch to enable a filter if a broadcast storm occurs on a user access port. It will write in the log, that the filter has been applied and only remove it if it falls below the configured falling threshold. Use the following command to enable it on an interface: 

I don't know your IP address structure, but i'll just use 172.26.0.0/24 as an example and a random IPv6 address (Remember this is just basic configuration): 

How do i make sure the QoS settings are implemented all the way to the user access ports? I can't figure out, how to tag the traffic on my access switches, I'm currently running Cisco 2960X on IOS 15.2(2)E6. What configuration do I need? 

Converting comment to answer. Ethernet1/47 was missing . The Nexus 3000 does not need an encapsulation command as it always encapsulates traffic on trunk ports. 

Assuming the technician is using Fusion splicing to connect the fibers, which they mostly do in my country, then there are strict temperatures to be complied with. Splicing activity must be done in a very clean place to prevent dust or any contamination that affects the splicing process. The temperature of the place which the splicing process can take place may vary from 15º C to 28º C. Although the fusion splicing machine can work at temperature between -10ºC and +5ºC and the closure can be installed at temperature between -1ºC and +45ºC, you still need to ensure that the splicing technician work in the optimum conditions to give the maximum efficiency. Typically in Denmark where i live, they use a heated van, where they take the fiber inside via a special window and then work inside at +20ºC or more. The splicing box you linked to says in the datasheet, that it can be installed at temperatures from -40 to 85℃, but it also clearly says: "The product components shall withstand storage at temperatures of -40 to 85℃." Fiber Optical Fusion Splicing Tutorial: $URL$ 

Is it possible to implement the below topology? I see that there is a port channel going downstream to the firewalls. By any chance, are the firewalls running as one virtual entity? As we see here are 2 different downstream firewalls, and we cannot run the portchannel. So if we cluster the FW01 and FW02 as a single entity and run the port channel in no LACP suspend mode, does that possibility exist? Note:SW01 and SW02 are N5k Peer KA link denotes peer keepalive link. Peer link denotes vpc peer link. 

I am trying to understand the difference between address-family vpnv4 and address-family ipv4 vrf So to test the scenario, i connected 2 routers(R1 and R2) linearly back to back. R1 has the loopback as 11.11.11.11 R2 has the loopback address as 22.22.22.22 On R2, i have the vrf TEST22. On R2, i also have a static route to network 100.0.0.0 in vrf TEST22 as shown below 

Q1:As you see R1, learns the route 100.0.0.0 in the vrf TEST11. Even though i did not activate the neighbor under , but still R1 learns that route. How? Is the acting as the transport carrier for that route? Q2:In another scenario, i removed the neighbor from the vpnv4 address family on both R1 and R2 as seen below On R1 

Similary for X.600 part. Q1:What exactly is the bridge group part used for?What if i remove it? Q2:I understand that any frame coming to the switch with a tag of 500, will be put onto interface Bundle-Ether1.500 and also onto interface Bundle-Ether2.500. This tag will be stripped(at ingress ) and pushed back at egress(when the frame exits these interfaces(because of symmetric command). Is that correct understanding? Q3:Bridge-domains represent ONE broadcast domain.So all the interfaces under one bridge domain are part of SAME broadcast domain? As for above, the Bundle-Ether1.500 and Bundle-Ether2.500 are part of SAME broadcast domain BD1. Is that CORRECT understanding? Q4:Why at all do we need to group these Bridge-domains? What advantage am i getting?Why are we tying all the Bridge-domains under a single bridge group? Q5:What role is l2vpn command playing in above? 

That's it, the switch and ports will now run Auto-QoS. Auto-QoS Configuration guide for the 2960X Series: $URL$ Enabling Auto-QoS on the Core layer There's a big difference in the way QoS is handled by Core switches. The Cisco 6500 Series does not support Auto-QoS SRND4, therefore we will need to manually configure QoS and map it to the correct classes in order to preserve the Auto-QoS design. The Cisco 3650 and 3850 Series support Auto-QoS SRND4 and therefore it's pretty simpel to configure: Enabling Auto-QoS on the 3650 and 3850 Series Global configuration 

The command you mentioned above it is not supported by Packet Tracer. Packet Tracer will not provide you all the features of a Router. For Routing you can use GNS3 which is the best software for routing and you can download it, as freeware. In real equipment, it enables a port to send traffic to a host address with all ones. This reaches all hosts on that subnet. For example we could have an interface with address 192.168.1.1/24. If we enable directed-broadcast and sent a packet to 192.168.1.255, it will be broadcasted to all hosts on that interface. It will use a destination Mac address of FF-FF-FF-FF-FF-FF. 

Here the destination of will be reached via the BGP session, in which BGP gives it the source IP address of . Now consider the fact that you didn't have a loopback and your interfaces went up or down or the routing protocol information changed during an iBGP session, it may happen that you start sending your BGP packets to a particular peer from another outgoing interface than you originally used to establish the BGP session. This would create peering problems, as the peering is bound to IP addresses of the neighbors, and if they change, the peering session will have to be reestablished from the scratch. The loopbacks here are helping you to maintain a stable pair of communicating IP addresses that do not depend on the state of actual physical interfaces or existing routes through an internetwork. Of course, the loopbacks must be reachable, i.e., the path to them must actually exist. Conclusion is you should be able to use a loopback address as your IP source address when talking to a peer if you wish to do so, but you absolutely should not be forced to use it. This freedom of choice necessarily brings the special "neighbor update-source" command. 

As you see, on R1, the route to 100.0.0.0 no longer exists. Moreover, the BGP vrf peering is in Active state. Why is this happening ? is there any relation between and ? Is it mandatory for to have neighbor activated for vrf routes to be exchanged? 

So essentially, as we place a router in a network and assign ip addresses, we are creating new broadcast domains. 

I have to make sure that the loopback interface of R1(1.0.1.1/32) is learnt on R2 but with a few constraints. Step1: The loopback of R1 is learnt in global routing table of R2 via ospf Step2: R2 and R3 are ebgp neighbors for address-family ipv4 (on interface f0/2--which is in global routing table) and address-family ipv4 vrf (on interface f0/1 which is part of vrf TEST on both R2 and R3) Step3: At R2, I redistribute the ospf learnt routes to BGP (ipv4 address-family). Step4: R3 learns the bgp routes from R2 via ebgp (with a next hop of 192.16.2.9) in global routing table. Step5: At R3, I do a route-leaking from the bgp ipv4 address family to bgp vpnv4 vrf TEST address family for 1.0.1.1/32 So, R3 has a route to 1.0.1.1/32 in vrf TEST with a next hop of 192.16.2.9 (which is in global routing table) Step 6: R2 learns again the 1.0.1.1/32 route via ebgp address-family ipv4 vrf TEST with a next hop of 192.16.1.10 Now my objective is to make sure R2 can ping the 1.0.1.1/32 via the vrf TEST(but as expected it fails) Any suggestions on how to get the above scenario working. (One of the ways,this can be done is to configure the interface f0/2 on both R2 and R3 as below: 

Our topology is primarily based on a star topology, observe the following topology drawing (We use BGP in our WAN MPLS): 

I have implemented the 4-Class QoS Model as described in this earlier post from 2013. This Core configuration is implemented on a Cisco VSS 6509-E setup running software version: Cisco IOS Software, s2t54 Software (s2t54-ADVENTERPRISEK9-M), Version 15.2(1)SY3, RELEASE SOFTWARE (fc3) Copyright (c) 1986-2016 by Cisco Systems, Inc. On my uplinks to the access layer, the service policy has been configured, example: 

Due to big changes in the new NX-OS version 7 there is only a few upgrade possibilities. From Cisco release note whitepapers: You can perform an In-Service Software Upgrade (ISSU) from the following release to Cisco NX-OS Release 7.0(3)I7(1): 

VLAN Trunk Protocol (VTP) reduces administration in a switched network. When you configure a new VLAN on one VTP server, the VLAN is distributed through all switches in the domain. This reduces the need to configure the same VLAN everywhere. VTP is a Cisco-proprietary protocol that is available on most of the Cisco Catalyst series products. VTP modes: Server In VTP server mode, you can create, modify, and delete VLANs and specify other configuration parameters, such as VTP version and VTP pruning, for the entire VTP domain. VTP servers advertise their VLAN configuration to other switches in the same VTP domain and synchronize their VLAN configuration with other switches based on advertisements received over trunk links. VTP server is the default mode. Client VTP clients behave the same way as VTP servers, but you cannot create, change, or delete VLANs on a VTP client. Transparent VTP transparent switches do not participate in VTP. A VTP transparent switch does not advertise its VLAN configuration and does not synchronize its VLAN configuration based on received advertisements, but transparent switches do forward VTP advertisements that they receive out their trunk ports in VTP Version 2. VTP can be turned off on the older CatOS firmware. By default, all switches are configured to be VTP servers. This configuration is suitable for small-scale networks in which the size of the VLAN information is small and the information is easily stored in all switches (in NVRAM). In a large network, the network administrator must make a judgment call at some point, when the NVRAM storage that is necessary is wasteful because it is duplicated on every switch. At this point, the network administrator must choose a few well-equipped switches and keep them as VTP servers. Everything else that participates in VTP can be turned into a client. The number of VTP servers should be chosen in order to provide the degree of redundancy that is desired in the network. There are some disadvantages to the use of VTP. You must balance the ease of VTP administration against the inherent risk of a large STP domain and the potential instability and risks of STP. The greatest risk is an STP loop through the entire campus. When you use VTP, there are two things to which you must pay close attention: