This document should work for 2960 model switches as well: Configuring Isolated Private VLANs on Catalyst Switches 

Update -- Optical Fiber Standards and Their Applications Small form-factor pluggable transceiver Different SFP types expect certain fiber type/sizes. While they may work with other types, the operation of single-mode vs multi-mode is different and could impact performance. Multi-mode optical fiber 

This will work but it would be a poor design choice (IMHO) unless you have a specific reason for doing so. See this discussion: Duplicate OSPF area IDs OSPF Best Practicies Recommended OSPF configuration best-practices (using the SSM example) OSPF area configuration best practices Update #1: 

As has been said elsewhere, using /31 bit masks can work and is a good way to conserve your available address space. What is perhaps more import is under what circumstances can't you use /31s? What protocols or applications could misbehave or break as a result of not having a broadcast address? BootP and DHCP are at the top of the list according the the previous article, but we aren't concerned with those on router point-to-point links. ARP uses a broadcast MAC address - not IP - so shouldn't be any issues there... OSPF & EIGRP both use multicast addresses, RIP v1 looks like it could be an issue though. What else is dependent on the broadcast or network address? 

Cisco Catalyst switches have the concept of private vlans which should accomplish what you are trying to do. 

The difference between the two is one of significance. VLANs are generally only locally unique while subnets are usually unique across an organization. Folks 'in the know' understand that vlan 100 in campus 1 is different than the one at campus 2 if the subnet of one is 192.168.1.0 and the other is 192.168.2.0. But you could have vlan 100 repeated in every building across a campus if you separate them by layer-3 boundaries and use different subnets. And then there there are the exceptions to the rules or the bad designs that get worked around with duct tape and nat pools... 

Here is an article that goes into more depth: Would you mind waiting for 2-3 mins in a console? And a bit from Cisco's documentation: 

With most equipment, the CPU shoots to 100% and the only thing you can do is break the redundant physical connections. Once the CPU calms down you can plug the links back in one by one and see which one re-causes the loop. For big chassis (like a 6500) I've had to pull out all of the blades and plug them back in one at a time. Once I figured out which blade, then I had to pull all of the individual links (16 GBICs) and put them back in one at a time as well. Never fun. Some more modern equipment has a protected CPU which should make this easier to deal with - you can still interact with the box. At that point looking at traffic counters and such to determine the malfunctioning link becomes possible. 

You don't need both inside->outside and outside->inside rules. Just the (inside,outside) rules will do what I think you intend??? (they apply in both directions) 

The big problem with this is out-of-order packets and statistically half your traffic flowing across a slower, more loss-prone link. If you can do L3 (ip) across both links, I would suggest "CEF per-packet" load balancing. But again, half the traffic would be crossing a slower link. (I'm not sure CEF uses link bandwidth.) What you have is an unequal cost multipath network. 

While not necessarily the answer you're looking for... (a) simplicity, and (b) cost. One firewall is half the cost of two. With enterprise grade hardware being rather expensive, when one springs for two, they are most often setup in a high availability failover pair. Having one firewall for internal LANs, and one for DMZ(s) does provide greater isolation between the two. The DMZ(s) can be completely, physically, isolated from the rest of the enterprise. Rarely is that level of security and isolation required. (military, banks, etc.) Using one firewall with a DMZ interface -- or VLAN -- is a reasonable compromise. Yes, you run the risk of configuration faux pas exposing your internal network to the DMZ systems. The reason to have a DMZ -- the purpose to all this isolation -- is to keep the public, internet facing services in a place that their compromise doesn't expose your entire enterprise. The DMZ is where you put the "dirty" systems -- the things people are going to attack. They're kept in their own network with their own set of extremely restrictive access rules where they can be monitored diligently. 

Despite the volume of broadcast traffic through the switch, very little (none) is in the management vlan (10 in my case.) 

Just because some devices will link doesn't mean the switch isn't still bad. Some NICs will be more tolerant of marginal signaling and/or timing. Personal example... I have a Nortel ERS with a damaged clock circuit (power outage killed it.) I've verified with a scope that the clock for the second half of the switch is noisy and marginally out of spec. As a result, some network cards will link, and actually function. However, most, including the other half of the switch and every other switch I have, won't. 10M works fine, because the PHYs generate their own clock. 100M only works with "loose" NICs. 1000M won't even link with itself -- that signal is pure noise. Cheap switches are cheap for a reason. I'm not going to say how many sub-50$ "hubs" I've thrown away. 

VLAN 1 () is the default. As such, it will not normally show in the config. is the command to see what vlans are defined, and what ports are assigned to them. The interface list will never show any IP configuration for the ethernet ports because they are part of a switch. (and you cannot them into routed interfaces.) All layer-3 configuration is via VLAN interfaces. 

In one of the articles i read the following regarding Bridge assurance: "When enabled, BDPU’s are sent out all ports including the backup and alternate for each Hello Period. How this feature works is that it monitors the receipt of BPDUs on point to point links. If it does not hear a reply it changes the port state to an inconsistent state. This prevents any frames forwarding and a loop is avoided. The same is true of UDLD aggressive mode where a port err-disables." Q: When bridge assurance is enabled on a port, does that mean that it will start sending out BPDUs(irrespective of it's STP state)? If Bridge Assurance is enabled on a BLOCKED port, will the Blocked port also start sending BPDUs? If so, why? From what i know, the BPDUs are sent out ONLY from Designated ports once the STP is converged. Please correct me if i am wrong. 

From the cisco docs i have: "vPC and HSRP/VRRP Object Tracking As Figure 67 suggests, it’s important not to use HSRP/VRRP link tracking in a vPC configuration. Assume HSRP/VRRP object tracking is configured on both vPC peer devices and L3 uplink failure occurs on switch 7K2. This event triggers the HSRP/VRPP object tracking and the resulting SVI with associated HSRP/VRRP configuration is set to DOWN state. So everytime 7K2 receives a frame destined to HSRP/VRRP vMAC, it bridges this frame over vPC peer-link because the other vPC peer device is able to process this frame (as SVI with associated HSRP/VRRP configuration is still in UP state). Using vPC with HSRP/VRRP object tracking may leads to traffic blackholing in case object tracking is triggered: the reason is that vPC systems will not forward a packet back on a vPC once it has crossed the peer-link (because of the vPC loop avoidance rule), except in the case of a remote vPC member port failure. " Refer the attached image: 

Similary for X.600 part. Q1:What exactly is the bridge group part used for?What if i remove it? Q2:I understand that any frame coming to the switch with a tag of 500, will be put onto interface Bundle-Ether1.500 and also onto interface Bundle-Ether2.500. This tag will be stripped(at ingress ) and pushed back at egress(when the frame exits these interfaces(because of symmetric command). Is that correct understanding? Q3:Bridge-domains represent ONE broadcast domain.So all the interfaces under one bridge domain are part of SAME broadcast domain? As for above, the Bundle-Ether1.500 and Bundle-Ether2.500 are part of SAME broadcast domain BD1. Is that CORRECT understanding? Q4:Why at all do we need to group these Bridge-domains? What advantage am i getting?Why are we tying all the Bridge-domains under a single bridge group? Q5:What role is l2vpn command playing in above? 

Rule #1: in a mixed vendor environment, one avoids use of vendor proprietary protocols There are (apparently) several complications attempting to use VSTP (a Juniper protocol) with PVST (RPVST actually, a Cisco protocol) -- while they both run a per-vlan RSTP instance, they don't do it exactly the same (something about tagged/untagged native vlans, etc.) Your best bet would be to use an open, documented standard with rules everybody obeys. That would be MST (802.1s, now part of 802.1q.) Of course, MST is a great deal more complicated to setup. (been there... complex hundreds of vlans across 4 vendors) All this assumes the carriers aren't screwing with the traffic. If I'm following your description, the metro-e links are between juniper switches and the cisco's hang off the juniper's at each site. If that's true, there's only one path from a cisco to the other side, so mac flaps shouldn't be possible -- unless there's a pair of junipers at each end round-robin'ing traffic between sites. (or there are etherchannels that aren't setup/running correctly) 

The most specific route is preferred. 24 is longer ("more specific") than 22, so it will be used. If they announced only one /24, then they only took over that one /24 out of the larger /22. 

You likely have two problems. First, you possibly have multiple DHCP servers in one network. I'm unclear on how your two routers are linked. The WAN of one connected to the LAN of the other (internet connected) one would be ok. Second, and here's the meat: you are trying to use protocols designed to not span subnets across subnets. 

The only issue will be an inability to talk to the real (internet) machines with those addresses. Of course, you can put a firewall ("nat box") between your network and this thing to make it look like private addresses to your network. This sort of thing has popped up all over the place for many years due to people being lazy and using "unassigned" addresses for their own purposes; now that they're assigned, it presents a small problem. [Edit: for the record, I never renumbered my home network. but I'm not likely to ever need to talk to the people who now have that address space. 15 years and counting...] 

Your etherchannel is setup incorrectly. If you look in the logs, you'll see a configuration mismatch because the PoX and G0/X interfaces do not have identical functional configurations. Start over. Delete PoX. Default the G0/X interfaces. The ONLY thing you configure on the member interfaces is the . Then setup everything on ; those elements will be copied to all member ports. 

Broadcast domain : Every network represents a broadcast domain. E.g 10.0.0.0/8 is one broadcast domain; 20.0.0.0/8 is another broadcast domain. In general, every interface of a router represents a broadcast domain. For devices in one broadcast domain, to talk to devices in another broadcast domain, we need a Layer3 device (called a Router). 

I have questions regarding the following designs in my test lab: 1.Ethernet port of one switch is connected to TenGig port of the Firewall.Why would anyone do this(connecting Ethernet and Tengigabit Ethernet)? 2.N5k E1/4 (LC type) connected to E1/4(LC type) with MMF as the media. The speed shown is 10Gb. Is this possible? If so, how? 

I want to ping from R2 to vrf lo0 of R1; but it fails, even though i have configured static route leaking. Please suggest why it fails 

I have to make sure that the loopback interface of R1(1.0.1.1/32) is learnt on R2 but with a few constraints. Step1: The loopback of R1 is learnt in global routing table of R2 via ospf Step2: R2 and R3 are ebgp neighbors for address-family ipv4 (on interface f0/2--which is in global routing table) and address-family ipv4 vrf (on interface f0/1 which is part of vrf TEST on both R2 and R3) Step3: At R2, I redistribute the ospf learnt routes to BGP (ipv4 address-family). Step4: R3 learns the bgp routes from R2 via ebgp (with a next hop of 192.16.2.9) in global routing table. Step5: At R3, I do a route-leaking from the bgp ipv4 address family to bgp vpnv4 vrf TEST address family for 1.0.1.1/32 So, R3 has a route to 1.0.1.1/32 in vrf TEST with a next hop of 192.16.2.9 (which is in global routing table) Step 6: R2 learns again the 1.0.1.1/32 route via ebgp address-family ipv4 vrf TEST with a next hop of 192.16.1.10 Now my objective is to make sure R2 can ping the 1.0.1.1/32 via the vrf TEST(but as expected it fails) Any suggestions on how to get the above scenario working. (One of the ways,this can be done is to configure the interface f0/2 on both R2 and R3 as below: 

By default,all the devices connected to a switch are part of same broadcast domain.They can talk to one another without the need of a layer 3 device. 

ICMP is the result of initiating the ping from a source to a destination.It has got nothing to do with ARP as such. But for any 2 devices to talk to each other, each device would need to know the or layer 2 address of the other device(assuming the devices are in same network; if not in same network,they need to reach their gateway at least). This is where ARP comes in. ARP says, can you give me the mac address for this IP address? ARP helps in building the control plane(say building a road), before the actual ICMP traffic in this case(the data plane) starts moving.