Now you can connect your Linux server to that port (X2, or to a switch connected to that port -- you could have several machines in your range, so long as they all have unique IPs within the WAN subnet, like 3.3.3.5 and 3.3.3.6 in our example). The Default Gateway of the devices in the Transparent Range (X2 in our example) can be EITHER the WAN IP of the SonicWALL (3.3.3.3) OR the Default Gateway of the subnet (what the SonicWALL has as its Default Gateway, 3.3.3.1 in our example). DNS should be the ISP's DNS servers or some public ones, like Google's. You will now need to some Firewall rules: 

Check the Network | NAT Policies. An Auto-Added Policy is usually added automatically. You may be missing one from Inbound Interface = X4, Outbound Interface = X3. You will probably see one for X0 (in) -> X3 (out). Near the bottom. Source IP is Any, Translated IP is X3 IP Address or WAN Primary IP or something. [Destination IP and Services are all Any / Original] 

As KorXo mentioned, this is a standard Hub and Spoke configuration, but KorXo's link is for IPv6. Here's one for IPv4: $URL$ There's also a video. Basically you create the VPN (eg. from Branch 1 to Main) but use an Address Object GROUP that includes both the Main and Branch 2 subnets. That way Branch 1 understands the VPN to Main includes Main AND Branch 2's networks on the far side. The other sides are similarly configured. An alternative is to use Tunnel (route) based VPNs. When you start adding additional Branch sites this makes life simpler as the VPN is just a tunnel from Branch X to Main, and ROUTES are added to allow traffic from Branch 1 to Branch X. See: $URL$ Either would be fine in your situation (with 2 Branch sites) but one may make more sense, so have a look at both! Then choose one, try it and open a new question if you need further assistance (try to include router models, SonicOS versions, and maybe a diagram - showing interface configurations). Good luck! 

Hopefully you will find one computer (or maybe several) that cause the the traffic to spike and decrease your download speeds. 

If you have a WAN subnet of, for example, 3.3.3.3/29 then you have a range of WAN IPs from, say, 3.3.3.2 - 3.3.3.6 (let's assume 3.3.3.1 is your default gateway/ISP router). If your SonicWALL X1 interface is configured to use 3.3.3.3 then you can use the other available IPs to provide NAT to internal IPs (on your X0 interface, or another interface) OR you can provide Transparent IPs to another interface where devices on that Transparent interface will have PUBLIC IPs (like 3.3.3.4). The SonicWALL KB you linked to is part of the first case: providing external access using (say 3.3.3.3) to some internal IP (say 10.100.0.3) on a LAN (or DMZ) interface. This is OK for services that are NAT friendly, like HTTP. BUt less so for VoIP protocols that are not. What you want to do is configure an interface in Transparent mode (which is called Splice L3 Subnet in newer SonicOS releases). Have a look at this KB: $URL$ Transparent mode is like the device having a Public IP and "sharing" the WAN subnet BUT is still fully protected by the firewall and security services (IPS/Gateway AV, etc) with no NAT to get in the way. What to do: If you have a server on 3.3.3.4/29 which means it has a Public WAN IP and you want to put it behind the Firewall then you want to configure an interface (say X2) in Transparent / L3 Splice mode and connect it there. 

In the screenshot I have an Address Object with both of Google's Public DNS addresses added. If my LAN Primary IP is 192.168.0.1 then I can give that out via DHCP (or assign it statically) and my LAN clients will be able to do DNS lookups against 192.168.0.1 such as: 

You will of course need a Firewall rule that allows DNS traffic from the LAN/X0 Subnet to the SonicWall's LAN/X0 IP -- but this should exist by default [as an Any/Any rule]. I've done this on a variety of SonicWALL routers when I have swapped out consumer/home-grade routers that do DNS Proxy/Redirection and there were devices with Static IPs that I couldn't log into to adjust. Works fine. 

By default the LAN Zone has Interface Trust enabled, which means all interfaces within the same Zone trust each other (pass traffic). Go to Network, Zones, and Edit the Zone in question (LAN) and remove the checkmark from Allow Interface Trust. This will remove the auto-added LAN<->LAN Allow ANY/ANY/ANY rule. Alternatively if these are NOT really both part of the same Zone (security context) then either change one of the interfaces to a different Zone (eg. DMZ) or create a new Zone. By default traffic between Zones is only allowed from "more trusted" to "less trusted" (but not the other way. Eg. from LAN to DMZ but not DMZ to LAN). 

And you want to use a Public IP from each ISP: select which IPs and create Address Objects for each (in my example the X1 WAN IP Object will be the only IP for that interface, for X2 and X3 you will need to create Objects for the IPs you want) such as: 

You will need to create a similar Firewall rule from WAN > LAN using SERVER-16 Public IPs as the Destination (since it is a NAT rule), the same Service, and Any as the Source. I have done this on several SonicWALL devices and it works just fine. PS: You could probably set multiple 1:1 inbound NAT rules if you'd prefer, but that just gets messy with many WAN IPs, and when you want to make changes. For OUTBOUND return traffic the SonicWALL will send the data back using the original inbound interface (so if someone connects to the X3 IP it will come back to the user via X3. For OUTBOUND original traffic -- meaning browsing from SERVER-16 for Updates NTP time updates, etc -- the outbound interface/IP will be determined by the Outbound NAT rules and likely the Load Balancing settings and routes. 

You likely don't have a DHCP scope configured for the OPT interface (in the DMZ Zone). I don't have a TZ 190 or a device with that older SonicOS 4.x firmware but you can do one of two things: 

First double check the devices on that X4 subnet: Can they reach the router (192.168.250.253)? Is that is their default gateway? Correct subnet mask? Are you statically assigning IPs or using DHCP? Assuming all is well and they can reach the router but not beyond: If you can't connect between your X0 LAN and X4 other subnet then I assume they are in separate Zones (unless you created one I will assume DMZ for X4) -- or you disabled Interface Trust for the LAN Zone. By default the DMZ Zone will have internet access, but you can check several places to ensure it has access: 

Then that is a regular interface, it is expecting only UNTAGGED packets. If they are connected by a switch then configure the port for SonicWALL A's X4 interface as TAGGED on VLAN 110, and the port for SonicWALL B's X3 interface as UNTAGGED on VLAN 110. OR create a VLAN subinterface on SonicWALL B with the same VLAN ID (eg. X3:110). Likely you making SonicWALL B's X3 speak to SonicWALL A's X4, not SonicWALL A's X4:110. You need both sides to agree: tagged or untagged packets. A switch can add/remove tags based on the Port VLAN IDs and VLAN membership settings; or the SonicWALL ports need to be set the same. 

You certainly can do MANY:1 NAT -- that is: have several Public WAN IPs point to 1 internal LAN IP. Just create Address Objects for each WAN IP and put those Address Objects into an Address Object Group. Then create your NAT (and Firewall) rule using the Address Object GROUP. Inbound Internet traffic destined to any of the Public IPs in the Address Object Group will be NAT'd to the internal IP. So, for example, if you have 3 ISPs and one internal LAN looking something like: 

then that is a VLAN subinterface, it will be sending TAGGED VLAN packets out tagged on VLAN 110. Whatever interface/IP you have on X4 will be UNTAGGED. If SonicWALL B has: 

You can create one if one doesn't exist. But I would look under the X4 Interface' properties (Network | Interfaces) -- on the Advanced tab. Make sure Use Routed Mode is NOT checked off. If it is that disabled NAT, which you need if you are using an RFC 1918 non-routable/non-Public subnet on X4. 

The best answer will be to ask your ISP to either exchange your modem-router combo device for a modem-only device OR see if they can switch it into Bridge mode (where it becomes only a modem and no longer acts as a router). [I have a Cisco modem-router device from my cable ISP that is like that, I called them and they did something on their end then had me reboot it and it was no longer a router] If you CAN'T do that (or if you need to get up and running fast) then you CAN connect your SonicWALL behind the modem-router device, it will be double-NAT. Some services will be less happy about that but most won't care. Just configure X1/WAN with an IP on the 10.0.0.0/24 subnet. Your LAN clients (on 192.168.168.0/24) will be NAT'd by the SonicWALL to a 10.0.0.x IP and then NAT'd again by the modem-router device to your actual public IP. For outbound this isn't an issue. For INBOUND you will need to open ports on your modem-router (pointing to your X1/WAN IP) as well as create NAT rules on your SonicWALL. Or you can look for a "DMZ" option in the modem-router which forwards all ports to the specified IP (basically a wide-open ANY/ANY/ANY NAT rule) -- common on consumer grade routers. Note: Some of these modem-router combo devices (which, to be honest are not great, and not designed for business use) will only perform NAT/pass-traffic for IPs it has assigned by DHCP, in that case you may need to set X1/WAN to DHCP and have it obtain an IP from the modem-router device. If yours is a 2wire brand this may be the case. I have configured a SonicWALL NSA 240 (the precursor to the 220) behind another router doing NAT and it wasn't a problem, I just had to create rules on both. The only limitation is that the SonicWALL won't allow the same subnet on two interfaces so you can't also use 10.0.0.0/24 for your LAN. But if I were you I would contact the ISP and ask to either get them to switch it to Bridge Mode (if possible) or exchange it for an actual DSL modem: so the SonicWALL gets the Public IP on the X1/WAN IP (using Static, PPPoE, DHCP, etc). If not you will be limited by the speed/resources/abilities of the combo device which I suspect are not nearly as robust as the NSA 220. 

Have you considered that something on the local LAN may be downloading/consuming a lot of traffic? How many computers do you have connected to your switch? (including any wireless clients from an AP) What kind of ISP/internet/modem do you have? (xDSL, Cable, etc) What are your normal expected speeds? What are you seeing now? How are you testing? (eg. $URL$ If nothing else has changed I suspect it is not that the SonicWALL is overloaded. (on the System, Status page what are the Connections and Connection Usage values? and the CPUs percentage?) 

Depending on the config of the Voice Router there may be firewall polices that need to be created, but hard to say - I suspect not. Result: Anything on your Data LAN will have a default gateway of the SonicWALL - and the SonicWALL has an interface on the VoIP network so can pass packets along. Anything on the Void Network will have a default gateway of the Phone Router and that router now has a route pointing to the Data LAN via the IP you assigned to the X2 interface, so packets can travel back. 

What Network | Zone is X4 in? If the same Zone as X0 then is Interface Trust enabled on that Zone? Likely not if you can't connect between them. Check the Firewall | Access Rules. Look at DMZ (or your Zone) > WAN: You should have an Any / Any / Any Allow rule, if not you can create one or perhaps you have added a Deny rule with a higher precedence. 

If you have tested each component individually and they all test OK (meaning don't cause an 80% drop in speed) the devices are probably not the problem, it's probably one of the computers. You can also use something like LAN Speed Test ($URL$ to test speeds across your switch -- it's possible your switch (or a few ports) is dying under high load. 

It should work. The new TZ SOHO is in the same class as the TZ 105/205/100/200 range of products. SonicWALL has a technote detailing how to create a STATIC VPN tunnel for an Amazon VPC (Virtual Private Cloud) on AWS: $URL$ (points to a PDF to download, latest release is "D", which mentions the TZ 10x/20x line). It also mentions needing SonicOS 5.8, 5.9, 6.1 or 6.2, of certain sub-revisions, the SOHO will be either 5.9 or a 6.x SonicOS I believe. A new device will allow at least 90 days to download firmware updates. Because the TZ series doesn't support BGP it will only be a Static IPSec VPN tunnel (must be in Tunnel not Policy mode). In your second link select "Example: Generic Customer Gateway (without BGP)" on the left as that is what you will be configuring to get an overview. Amazon will request some IP info from your side and then provide you with the specifics you will use. Then follow the PDF in the above link which shows how to configure the SonicWALL (see the section under "Configuring Amazon VPC with a Policy-Based VPN"). Others have done this, see: $URL$ If you have never configured VPNs before then I would suggest setting up a basic site-to-site VPN (between a SonicWALL and another SonicWALL perhaps) just to become familiar with what needs to be done (preferably in routed tunnel mode). The PDF has many screen shots and should be fairly easy to follow if you have configured a VPN on a SonicWALL before or if you're at least somewhat familiar with SonicWALL management and willing to try. If you wanted a Dynamic BGP VPC to AWS you would either need a higher end SonicWALL or a different device (a Juniper/NetScreen SSG-5 is low-end but still supports BGP and works with Amazon for example). 

In my experience it can take a few minutes for the Transparent interface to "work" -- so once you configure it and add the rules, try connecting out from the Server to the internet and give the SonicWALL a few mins to update the ARP tables to allow it to work. If it doesn't try changing the gateway on the Server to the SonicWALL's IP. Or test the scenario with a laptop to get a working setup before connecting in your Server. [Note: L2 Bridge mode is different, that's also Transparent but placing the SonicWALL "inline" more like a switch not a router, if you see that option] 

Meraki APs need IPs with internet access as they connect to the cloud-based controller network. Without a Static IP or DHCP on the OPT subnet it has no IP. Whether you configure the NAT on the Meraki (for the Guest Network) won't change, you can either leave the Meraki clients on the OPT network and manage them with the SonicWALL, OR configure the Meraki Guest network (which enabled a mini-router on the Meraki AP which does NAT and creates a 10.x.x.x Guest network) and manage the guests on the Meraki (this would be Double NAT). If you manage the Guests on the Meraki you might as well leave the Meraki on the LAN subnet since it will keep them isolated from the local management network. But if you wanted to have, say, your internal Wireless users on the OPT/DMZ subnet BUT ALSO have Guests on a separate subnet then putting the Meraki on OPT and configure Meraki controlled Guests is the right idea. Or you can configure VLAN subinterfaces if you have a managed switch and run several subnets that way, all managed from your SonicWALL.