I've been searching all over the internet, but I could only find those dba blogs with lack of information, and some posts saying that the primary database was dropped ( obviously was not ). The primary instance is 2012. The secondary is 2014. the secondary database is in recovering mode. To fix this, should I recreate all log shipping? 

And I would like to know, if this is a query to see databases that are using more CPU, or is this based with past information? I'm trying to know what is causing my server to have high CPU use: 

Normally, our log backups has < 10MB size In a big database with a lot of transactions per hour ). But now we have a database, that is storing Images on a Image field. the problem is, the database is HUGE ( it has now 500GB MDF, and 700GB on LDF file )and every log backup has more than 70GB ! What is the best way to store Images on a database? I've seen a lot of posts saying about store the Physical patch of the image on a VARCHAR field. But this way, we need to store the images in some place, right? It will fill the storage in the same way. Or am I wrong? We have full backups every day at 22:00 and log backups every hour. 

As you can see, appears 2 times. So, how the hell can I list only those columns with more then 1 row_number, but returning all of them ( all duplicates ). in this case. it should return with row_number 1 and 2. 

i'm trying to update a remote table using linked server, based on id of my local table. I'm trying this: 

I see here that we have a lot of questions about best approach to mirror a single database. I got a new job and people there is under a task to mirror all databases, to a secondary one, in a different city for security (if we lost a server, we have everything on the mirror). 1) to mirror ALL databases, should I repeat the mirroring step for every database? 2)is this the best approach to high availability? I'm thinking about something with raid, so we have a mirror disk that if a disk fails, there is this secondary ( i just forgot what raid is this, im on the cellphone and will search later). I think there will be a lot of requests to mirror the data ( it's not going to be synchronous) if we really chose to mirror ALL databases ( there are more than 200). What would you guys do in this situation? I would even prefer log shipping. I just found this question but i really need to sleep now. Will study it tomorrow. It says about log shipping too. 

I'm in a process to change database collations. I could create ( and copy ) scripts to create/drop FKS, PKS, but i'm having problems with unique keys and check keys. I got this query: 

is configured this way: LSBACKUP_MyDatabase - every 25min : LSCOPY_MyDatabase - every 1 minute LSRESTORE_MyDatabase - every 10 minutes 

After some time thinking, this is what I did. probably not the best ( neither the faster ) solution. PLease I would be glad to learn a better way to do this. 

There's a lot of questions like this one on stackoverflow but none of them is working. tabela1=local 

You have maintenance plans. Try to follow these steps: Find the maintenance plan name and id that you want to delete. Write down the id of the one you want to delete. 

Try to use . Theres a column where you can see the Complete_percentage of a SPID/process. You will not find problems by killing or stoping a clustered index creation, the problem is, you will need to wait for the RollBack proccess ( if you are waiting hours for the creation, the rollback will take hours too ). 

How can I sum, for example, LAUDOS_EXPEDIDOS1 + LAUDOS_EXPEDIDOS2 Into a 4º column? like this: I'm pretty sure it's something really easy. I'm trying to use sum with the aliases, with no success. 

--Place the id of the maintenance plan you want to delete into the below query to delete the entry from the log table: 

But, this is for a test purpose, because I was trying to create a temp table inside the procedure like this: 

How can I be sure that the customer will run the script, with ansi encode, so we have no problems with those symbols on â, ó and et. We told them to customize their environment to use NSL_LANG = WE8MSWIN1252. TEST QUERY: 

Wow, I just took off the from the query, and now is at full speed. Just because of this, the query is now using paralelism: 

What would be the fastest way to do this? Alter column needs to touch EVERY row right? Is there a way to make this faster? According to questions and answers here, I'm thinking about, create a new table and migrate data, or create a new column with and migrate only the data inside this column and drop the old column. Obs. It's taking more than 3hrs. 

Inside it I have all columns from all tables. I need to find only those columns that has a different precision, size or etc. With row_number I got this: 

But , Isn't this an update? Why is this a deadlock? The update 2 shoudnt wait for the first one? this is the graph: 

After some time searching for an answer, I got a LOT of question saying to use ,, and etc, but what I need is: Table: 

I need to insert all .pdf files from a folder, in a table, according to its number. I could get a list of files ( I have all .pdfs inside a folder ): 

I'm having problems with logic, to think how can I put this code inside a procedure, as a field.Tried with CTE but failed too. 

We are implementing Zabbix, monitoring a lot of processes. But I think it would be great to monitor the SQL service ( if it's running, stopped...) 

Well, in this picture the server is pretty good, but almost always we have 90%+ of CPU usage, and using I can't find nothing ( obviously I got a lot of queries, but none of them seems to be hammering the server ).And read\write is pretty low ( everytime ). And thats what i'm having problems to understand. how can a low read/write server be using so much CPU? Does I/O have nothing in common with CPU? I'm trying to know what database is the heaviest one, to migrate it. 

But the restore never completes. using the complete_percentage is null ( for like, 10 minutes ). In my own machine, I could restore the database, this is my server: 

I can easily do this with a lot of ways, but I want to pratice cursors. I made this, but it gives me sintax error: 

I'm searching all over the internet and stack Overflow but every example I find is with only one row, or it just does not work. I have this table: 

Maybe this question is confusing to understand ( as I'm not fluent in English ) but, I need to select for example, but this needs to have the following rule: Part 1: it needs to be ALL cods, except for . Part2: Another column, with another , but only with cod 21. it's not the entire query, But after this, I think I can do it. I tried this: 

How can I do this without ? with this solution, I can only list the dabatase i'm connected. I can't understand how can I implement the inside this query: 

What am I missing? I tried to find some "currency language" or another option with no success. ( The Canada is a little motivation with my objective to move to Canada :) ) 

We are creating scripts to sent to our customers, with some inserts. We save them with ANSI encoding on NOTEPAD++, but when the customer runs the script via SQL*PLUS, it looks like this: 

( i'm not in the server where files are ) Thank you very much. Edit1: I can use this ( After a lot of tests, it's working ): 

is there a better approach for this? I could find the query, because it was the only statement using TOP.I think it was luck. 

I'm trying to create a cube, to know a little more about SSAS and as a DBA, be prepared for anything ( almost ). When I'm changing SalesAmmount's to , it doesn't change the values to currency. It keeps the big number values. 

We have An application that our customers use to download and upload files. I need to delete these files from disk after 30 days, of if it was downloded, in 7 days. How can i Use the script below, in a powershell, to do this task? 

Ok, It's listing every day, with sizes and a row_number. What I'm trying to do is to, by MONTH, list the growth rate. I made this query but it's not what I need: 

Obs1: I know WITH(NOLOCK) is a bad habit from programmers. I just got this query and I will try to not use it. EDIT 1: In the execution plan, I have this index scan for this query: 

About recovery modes, I know that if you want point in time recovery, we should use FULL recovery mode. if this is not necessary, you can use SIMPLE recovery mode. But, I read about Simple recovery mode, and it says that we should use this if point in time recovery is not important . Here we don't need LOG backups, we only use , and I thought that should be good for performance and disk space to use Simple recovery databases. But As I said, we don't have static data. there's a lot of insert, updates and development updates ( yes I don't understand why they don't need point in time recovery , but, anyway...). My question is, is still a good Idea to use simple recovery, or by not having static data, the log will still grow, and etc? 

Where should I put the database variable for the loop in a cursor? Thanks EDIT1: With this, it runs forever. god dammit: 

If theres something I can't learn, is PIVOT. People are trying to teach me this, I'm reading blogs about this but I just can't understand the logic. How can I turn this query , into a pivot? The query: 

One thing that I noticed was the wait type Is there a way to verify if the disk has a problem, but via SQL SERVER? Oh, and when I pause the script, I got this message: 

and with this, I can see columns that has a on it, so this one is duplicated ( same column, different size, precision or etc ). 

I'm using in a oracle server. No problem, I can connect to SQL Server, list tables and generate a really good report. But what I need is to extract the from tables and columns. I'm looking all over the internet but what I found is: 

The reason I'm asking this question is because I read every other question about mirroring here, but none of them could help me. 

What can cause this problem? the database is 140GB. Is there a place where I should verify? With the file is valid. I'm using T-SQL to the restore: 

The query just returns the first row after n-1 row(s) For example, if you want to get the second most expensive product (n = 2) in the products table, you just use the following query: 

According to one of the Microsoft's support pages, there is this query to show if there are gaps between logs. there are none: 

EDIT2: We are now using varbinary(max), but it's not solving our problems. It has now almost 700mb after 20 minutes. 

I have a table that i'm using to save the database size, everyday. I have this query using row_number(): 

You can create a job that's normally backup your databases. then In a batch file, you can create a folder with datetime, and then copy files to it ( You can do it all via SQL with XP_cmdshell: Use this code in a .bat file: 

I was thinking about this question ( Here where I work, we have a lot of space so backups are dayli ok ), and i'm thinking about if I was hired in another company, and see that they don't have backups, because there's no space. How can I say " So, we need xTB of storage for the backups".? There are some questions here and stackoverflow saying to use to get an approach. But I think this is wrong because I made 3 tests, and all of them are wrongs. ( In one test, My database has 257MB of size, and on is . When I create a backup, the backup has ). 

Has anyone seen this? I have no idea what is this error. When we Schedule a task to send an e-mail with report server, it shows me this error in error log. There are a lot of websites saying it is a SQL 2005 BUG. But I can't find nothing to help me with SQL Server 2008 R2. EDIT 1 Digging a little more...I could find this: 

Place the id of the maintenance plan you want to delete into the below query to delete the entry from the plans table: 

I'm setting up a Mirroring study session in separated servers. Everything looks ok, the firewall in my machine is disabled and in the another server it has an inbound\outbound rule to accept port 5022. I could check that both endpoints are created and STARTED in both servers with . 

I'm thinking in something like execute sql, But Im having problems with files with spaces in name ( jhon vacation.mp3 ) for example. Any Ideas? Edit2: Query done, now I need to fix the Spaces in files name. 

I'm having some headaches with a procedure. Long story short, I'm using now a hint to force an index ( now, the query runs in 0.1 secs, after this, it was running in 2min ) but the question is, why is it using Parallelism, if it is set to 0?