Q1:what is the meaning of 'Route metric is 0' in the above output? Q2: Is in any way related to Q1 ? I see that is configured under BE7 and not under Te0/0/0/1 in the running config. 

Q1: For the global routes to be imported to vrf table, it is mandatory for the global route to be present in the BGP table. Is that correct ? Q2: The exported routes from the vrf will be installed into the global BGP table and will then be installed in the routing table if and only if the next hop is reachable. This is my undertsanding. Is that correct? 

I want to send a syslog message from ASR9k. E.g i want to send the message(trigger) "hello world" from my ASR9k. Please suggest the command used for same. In one of the other blogs, i read: send log [Text Here] e.g. 

I understand the above, but i want to further dig deep into how loop might occur.How will unpredictable traffic scenario occur? I understand that there will be two vPC primary switch(both of them will act as STP root).Can you please clarify by using a simple topology? On further searching, i see the below post here 

Q1: Why would the resulting SVI with associated HSRP/VRRP configuration is set to DOWN state if the uplink goes down? From what i know, we can only change the hsrp priority if tracking is triggered? Q2:I am unable to understand, why the traffic blackholing occurs? Assume, there is a PC in vlan 100 at access layer and it wants to ping the far end router (the uplink router), i guess the traffic can still reach this router(via the vpc peer link, then 7k1 and then far end router)...will there be an issue in return traffic? )(I know the vpc loop avoidance rule which says that traffic received on a peer link will not be sent to any member port--but i don't undertsand how that applies here)? 

Imagine that both the vPC peer keepalive link and vPC peer link have gone down. I am trying to understand how will that lead to unpredictable traffic flows or loops. From what i have read on Cisco docs: 

Similarly for 600(only the dot1q tag would be 600) There is a router connected to the above ASR9k switch on the other end that has the IP addresses as below: 

The bgp neighborship now comes up. My question is- why does the neighborship not come up as seen in the first case? 

On the given router, my objective is to configure as-path-access-list so it doesnâ€™t accept any prefixes originated by AS 1. Below are the command outputs: 

I need to confirm the below as i don't have access to a lab. I have 4 XR boxes connected linearly as shown.Router A is advertsing PC subnet in isis. My understanding: So when the subnet of PC A reaches the Router D, the overall metric should be as Cost of PC A to Router A link + 16777214(A-B link cost) + 16777214(B-C link cost) +16777214 (C-D link cost) But the max metric in isis is 16777214, so will the final route get installed or not? If so, with what metric? With what metric will Router D learn the subnet of PC connected to Router A? 

I want this route to be learnt on R1. On R1, i have the vrf TEST11. Configuration and command outputs on R1: 

From what i understood, since we have 2 switches acting as vPC Primary(and hence both of them will be STP root as well), the links will be in forwarding state and hence there are chances of loop. Is that correct understanding? I am also trying to figure out, if a packet is sourced from S1, how is that likely to undergo loop? 

I have read that encapsulation takes place down the layers while decapsulation takes place up the layers. In essence, the encapsulation starts at Application layer all the way upto Physical layer. Assume we have a sender A and receiver B.Sender A wants to http to a server B. So for the encapsulation down the layers on A side we would have, Application(http)-Presentation-Session-Transport(TCP port 80)-Network(IP address of A)-Data link(Mac)-Physical(Bits 0 and 1). From above, we can say that PDU(Protocol data unit) of upper layer(say Network Layer) becomes the data of the lower layer(say Data link layer). Essentially,(Data+control Info )of Network layer =( Data ) of data link layer Now coming to the receiver side B(decapsulation process) Step 1: The Physical layer header is stripped off Step 2: The data link layer header is stripped off Step 3: The network layer header is stripped off and so on Q1: is the above understanding correct? Q2: I am getting confused as to why data link layer info is stripped off first? I mean, when we do ARP, we first look at IP address(layer 3) and request for mac address(layer 2 info). I understand that there is a value called Ethertype, that tells what upper layer protocol is being used(e.g mpls or IPv4 or IPv6) ? 

So, what is a VLAN ? A VLAN gives us the ability to create separate broadcast domains, even though the devices are connected to a layer 2 switch. To make devices in one vlan talk to devices in another vlan, we would need a Router or a Layer 3 device. 

For the neighbor relationship, the update source IP from router R1 must match the neighbor command on router R2, and vice versa To test the above,I set up my lab with R1 and R2 to test the above.(refer the pic shown below) 

Q1:The above command snippet does the following: 1.I am telling BGP to run inside my vrf TEST_VRF 2.I am redistributing all the static routes present in TEST_VRF routing table into bgp with a metric of 10 Please confirm if my above understanding is correct. 

ARP is always restricted to a broadcast domain.Always remember that a L3 device(a router) marks the boundary of a broadcast domain. To answer your question, ARP initiated by the PC, will have it's destination mac set to all (broadcast). Remember a switch only understands mac address. When this frame(layer 2 entity), comes to SW1, it looks in it's mac-address table and since it is a broadcast, it is flooded to all ports except the one it is received on. Next, the frame travels to SW2 and undergoes the same process to be only received by PC2. PC2 says, hey this is my IP address and let me reply to this.This travels back all the way to PC1, but this time it is a unicast. 

1.I understand that irrespective of the STP priority, vPC primary always sends the BPDUs.The vPC secondary device will just proxy those BPDUs. Please confirm if the above understanding is correct. 2.If vPC secondary has lower STP priority than vPC primary, who becomes the root switch? Who will forward the BPDU and who will proxy the BPDU? 3.Imagine N5k1 is vPC primary.It also has lower STP priority. Now if for some reason, N5k1 goes down, N5k2 becomes operational primary. N5k2 also becomes the STP root. From one of the blogs, i read: Now the Primary failed Switch N5K-1 comes online but vPC role is non-Preemptive in that case Primary N5K-1 continue to be act Operational Secondary but we have configured lower STP priority earlier on N5K-1 , now we have STP role change , Peer link will become STP root Port and that will trigger SYNC process inherit in VPC process , which blocks vPC trunk member port although time conumpation in overall process of SYNC is quite low but in production HFT envirnoment it matter alot . So to avoid this, we use vpc peer-switch command. Please confirm if the above behaviour is expected 

E.g if my MSS is 1460 bytes, then MTU should be at least 1500 bytes(20 bytes for IP header and 20 bytes for TCP header). I also understand that since the upper layer (MSS) will be finally encapsulated inside lower layer(Ethernet MTU), therefore MTU has to be greater than MSS. 2.I undertstand that CLNS is equivalent to Networking Layer of OSI model that ISO came up with. where does clns mtu operate--at which layer(i know it is not any of the osi layer as ISIS was developed before OSI layer)--so what would be the relation of clns mtu and mtu ? Should it be greater than/less than Ethernet mtu ? 3.In some config snippets, where isis is running, i see the below config 

This will send a SEV 2 message to the logging buffer, and test your syslog settings and alert handling. However, i could not apply the same on ASR9k. 

Please validate my understanding for the following points with regard to broadcast address: 1.Broadcast address is relative to a network, so every n/w will have it's own broadcast adress(I can obtain the broadcast address, by replacing all the n/w bits to 1) 2.When the destination IP address is a broadcast address,the router will send out the packet(by replicating it) out of all available interfaces. That means, if a router has interface f0/1 , f0/2 and f0/3 --then 3 packets will be sent out(each being sent out of one of the interfaces) 3.A frame with destination layer 2 broadcast address ( FF:FF:FF:FF:FF:FF) is sent to all the devices in the SAME LAN 

I am trying to understand the usage of bridge group command.Please refer the following config(on switch ASR9k): 

I have 2 routers R1 and R2 connected back to back. R1 and R2 are ebgp neighbors for address family ipv4 and address family vpnv4. I want to test the following: --Redistribute a route from R2's global routing table into the vpnv4 address family and advertise the same to R1 under vpnv4 address family. I did below, but can't see the routes being learnt on R1 under vpnv4 address-family. Please suggest what is incorrect. Below are my current configs: On R1: 

I got it working(with guidance of my colleague), please have a look at the configs, note that there is a minor change in the ip(replace 192 with 172), replace 1.0.1.1 with 100.0.0.1; and f0/1 is replaced with subinterfaces. Below are the working configs of my lab in GNS3. On R1: