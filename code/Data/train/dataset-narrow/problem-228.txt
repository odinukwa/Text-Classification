You're indeed right, CIR 19.5Mbps is shared by all child classes that you're configured in policy-map prioritize-GRE-traffic. 

But it is not very helpful to be honest, because it is not override configuration stored in NVRAM. So I was thinking about EEM applet to deny user perform copy run start and write memory. But users can easily remove EEM applet if they have access to configuration mode, aren't they? :-) Let me put the second question. Can I somehow use privileged in order to deny using of few configuration commands? But if user has access to configuration mode there is no way how to do that probably. I know, my question is not straightforward at all. I am just wondering whether I am able ensure that startup configuration (including management IP address and SNMP string) is always loaded after reload of router and overrides configuration created by user. I can not trust to users and be sure they will use only Linux script to save their configuration to their home folders and not copy running-config to startup-config. I need to be sure it will be foolproof. Thanks a lot for any idea, much appreciated. Daniel 

Even if it's advertised from PE_1 (route R3 in topology) router correctly (with correct RD and RT in NLRI): 

These are statistics for priority low latency queues. And you're right. As long as you use only one class (GRE-traffic) configured as priority, statistics are recorded only from mentioned traffic. 

Router-target import/export is necessary to determine which prefix belongs to which VRF (customer). So when BGP sending update, also include extended community depends on route-target export. And when particular PE router received that BGP update. He can easily recognize to which VRF prefix belongs, depends on route-target import. For above image from Wireshark, extended community has been included by PE router (10.0.0.3) depends on route-target export (red box). And will be included into appropriate VRF by another PE router (10.0.0.4) once he received that update, thanks to route-target import. When you will be familiar enough with above. You can study more advance features, like route leaking between routing tables, etc... I created simple MPLS network, so we can make some practical examples. (Topology contains only one customer CUST_A) 

This configuration gives you interface rate-limiting down to the desired bandwith (it is a percentage so 3= 30mbps on a GigE interface) and also checks the traffic being sent thru your outbound L3 interface to make sure that the traffic complies. By outbound L3 interface I am referring generically to whatever L3 gateway is shared by both clients whether it is an SVI (interface Vlan X) or your outbound physical interface. 

The ACL associated with a point to point VPN should always contain both source and destination information. To classify "interesting traffic", that is the traffic to be protected and then sent to a remote endpoint, Cisco devices (routers and L3 swithces and ASAs oh my) will look at both source and destination addresses. If you would like a singular host to be able to send traffic to an entire remote Class C, then your ACL would look like the following: 

Reflexive ACLs were the first way to define directional traffic initiation and dynamically open up security for return traffic. Router logic on this below 

Now we use Zone-Based firewalls (or whatever other catchphrase you want to use for the same technology) that pretty much do the same thing, but they can also adapt based on traffic inspection 

For web management interfaces and the like, I have always found firefox to be the most compatible (least buggy) at interpreting HTML from various vendors and devices. However, I do not regularly use this browser personally, only professionally. 

All of these terms arbitrary. A Vlan is a Vlan, some perform special functions though. I.E. Private VLAN configuration RSPAN VLAN configuration 

Let me start with short background for better understanding. We have LAB at work (Cisco devices mostly), and we would like to allow other employers connect remotely from their homes, build own labs during free time (something like CCIE rack from physical devices). For that reason we are going to build "Jump Host", basically Linux server used for connection to routers, switches, etc. There will be also few scripts for backup of configuration via SNMP, aliases for connection, so when user types R1, it will automatically trigger telnet to R1. And so on. Due to that, devices has to be always configured with management IP address and SNMP community string. The first question is. Is somehow possible to load startup-configuration from TFTP server and override startup-configuration from NVRAM? I have tried used: 

It is a length of time for which are data used to compute load statistics. So simply said, you can imagine it as the average traffic for 30 sec interval. And the all traffic which is processed by policy-map traffic-policer is specify above that line in class class-default (545169 packets, 822918951 bytes) 

But when I check Wireshark results on the Citrix host (source of the traffic), I can see that session is established anyway, please see it below. 

I have figured out that our Alcatels IP phones are not capable of sending EAPoL-Logoff messages on behalf of the data device, when phone detects that device has unplugged from behind the phone. Therefore, when users change devices, switch considers it as a security-volition and port is put to error-disabled. I have added aditional attribute to our Radius server (RADIUS Attribute 28), in order to remove authenticated (data) session in case of inactivity. It is working as expected, so far. I have found all information here: $URL$ 

We will redirect the traffic for your RAS VPN out of the preferred WAN interface by applying a route map to the Virtual-Template interface. 

Then how will your router know that it is not supposed to take traffic from another local sunbnet and encrypt it. Furthermore if you are running NAT on the same device, it adds further confusion. If your external IP on this VPN device is a public IP, then it also falls within the "any" statement of that ACL. "The reason they cited was because keeping the crypo ACL open like this and then limiting it with an ACL on the interface, you would cut down on the number of SA's built. How does this cut down on the number of SA's and is this the most efficient way to design VPN's?" This is technically incorrect, you will only have a singular SA (security association) between the devices for each tunnel, not for each individual TCP session or traffic flow. 

Yes, there is nothing wrong with your design and it will work. As far as your failover is concerned: Since your links are L2 your failover will operate as fast as you tune them to failover. I would recommend leveraging the "backbonefast" feature for your failover between the two switches. 

I use $URL$ on an almost daily basis to aid in forensics. I.e. If you have a mac address you can them obtain the manufacturer to guess at what the machine is. Then you can use only that mac address to find out other information 

You can simply append the ACL "REDIRECT-VIA-FAST-WAN" to route IPSEC traffic out your "fast wan" interface. 

I am currently working on dot1x solution for wired users. Configuration we have is working fine for most of our use cases, except one. We have working solution for users that are connected to the network via IP phones. However, one group of those users are changing their working place quite often during the day (they work on shifts). Which is quite problem because IP phone reboots every time when one user disconnects laptopA and new user connects laptopB to the phone. I am not sure why change of device which is connected to the IP phone, prompts reboot of the phone. I am using MAB as authentication for IP phones and dot1x for end stations. Please see switchport configuration bellow. 

It seems to me like switch removes all MAC addresses from CAM for particular interface, when computers are changed. But this does not happen when dot1x is not configured on the port. In this case, IP phone doesn't reboot. It has to have something with dot1x. Do you have any idea how to fix it? Many thanks. Dan 

This is really good question. Many people are confused, I think that it has something in common that Cisco does not have a good explanation about it in any book. You will never see different values between Shape average and target shape as long as you use shape average command. In case you will configure your shaping map by shape peak command instead of shape average your shaper will starts to use PIR instead of CIR. What PIR means? How will change it your shaping? That's quite long story. I am apologize but I am not going into any explanations but you can find answer to your questions here: $URL$ 

If "IP routing" is disabled then your frames are NOT getting forwarded by your CPU. I am familiar with the output that you are talking about though. The "show interfaces _ X/X stats" is a hidden command in IOS and as such it really isn't maintained the way most other show commands are. If you do a "show proc cpu sorted | in Input" then you will see the "IP Input" process. That is the best way that you can see how much of a tax the forwarding plane is putting on your CPU. 

In the above example I took the mac address off of a port, found its IP via arp entries on my core switch, then found the hostname via a "ping -a" from my workstation. $URL$ lets us know that the mac was made by Dell so at this point we can 1) Logically locate the machine on the network 2) Physically locate the machine on premises 3) test further for open tcp ports to the host to guess what operating system is running This may seem like a lengthy process but you can get quite fast at it and it definitely helps when you're mapping out the network of a new client. P.S. If you look up the other mac address from my post, you can probably determine something else about the network I pull this output from. 

Or if your router does not have the "ahp" and "esp" options for an extended ACL, you can simply add in the specific ports that the ipsec client tunnels over, namely UDP ports 500, 10000, and 4500, and also TCP 4500 for good measure. 

BGP sends KEEPALIVE packets in specified interval (60 seconds by default). If BGP not received 3 keepalive packets from neighbour, HOLD DOWN timer expires and the neighbour is considered as dead. Assuming the neighbor is down, shutting down the BGP session, and withdrawing all routes from it's announcements. HOLD DOWN timer, it's three times KEEPALIVE (180 seconds by default). When link between BGP peers came back to life (physically) and neighbours received KEEPALIVE packets the session is automatically UP. Peers starts advertise their routes in announcements, according to specified criteria. You don't have to reconfigure BGP session again. It would not make sense, because in real environments, BGP session fails quite a often. 

I have found out a strange behaviour when trying to establish TCP session between Citrix host and back-end server on port 5060. When I perform 'telent 172.18.52.73 5060' from Citrix host I get "connected to..." message. The thing is that the destination server isn't listening on TCP port 5060 and I shoudn't get this message. According to the Wireshark results, destination server doesn't reply to 'TCP SYN' packet with 'TCP SYN, ACK' but it rather sends TCP retransmission. 

I can't see prefix 192.168.0.0/24 in BGP VPNV4 table of PE_2 and in routing table of CE_2 router as well. 

I can do more examples, but I hope it's clear enough now. Hope it helps. Feel free to drop a comment in case of any misunderstanding. 

Host-mode is multi-domain as you can see. Thus, I thought that IP phones which have been successfully authenticated do VOICE domain, don't have to re-authenticate every time DATA device behind phone is changed. Example of successful authentication: 

The reason for this is that R2 and R3 do not have an interface connected to the 172.16.128.1/19 network, only R1 does. Since that network is not directly connected to R2 or R3, you cannot use it as a "next hop" for your static routes - it is not the next hop. R2 and R3 would have to forward traffic to R1 to reach the internet first, so it must be configured as the gateway for the default routes on R2 and R3. 

So, I am getting deep into my CCIE study and I just read about the TX-ring-limit interface command. I have used QoS a bit to oversubscribe software buffers to prevent frame loss on switches and whatnot, can you use the "TX-ring-limit" in a similar manner to decrease the likelihood of frame loss during bursty traffic on a LAN? Additionally I understand the following: 1) TX-ring-limit should be set to either a value of 1 or 2 for a low speed interface such as a T1 serial 2) Higher values can be configured on higher speed interfaces 3) Setting a high value can introduce jitter on a link because the software queue of a IOS device will send the packets to the hardware queue where they are simply FIFO Has anyone experimented with setting this to a higher value on ethernet LAN interfaces to allow the hardware queue to "hold on to frames" during a bursty traffic period, rather than drop them? 

This route-map should classify all traffic going back thru your RAS VPN (any source to a destination of your client ip subnet) and after the encapsulation/encryption it should route traffic out of your fast-wan interface.