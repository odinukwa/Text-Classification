First approach is the SQL approach. You need to make modification though. The relation that you are describing is called - each player can have each other player as friend. To achieve this you need a separate table which connects player with his friends (you just need 2 IDs): 

As far as I know, even you have 2 database files to take advantage from partitioning you must create partitions (this feature is available only in of SQL Server). Each partition will be in different file. No Archived will be in file. Others will be in . The process is automatic, so there is no need to change any SQL queries. So if configured properly the data will be automatically set in propper place. Take into account that the filed for partitioning must be clustered index. As other recommendation - you can set filegroup with archived data to be . this will speed-up the queries. The problem is that you have to set procedure that periodically archives data - set partition to , updates records for archiving and sets file to again. Take into acoount that when you have partitoning with the backup procedure will be complex. 

I experienced very strange problem today with TSQL function. The function has several parameters (int and bit). One of the (int) is set with value NULL. When calling a function with NULL inside the params function return ERROR (the error is ok, because I try to convert to value). When the function is called with param @p1 which value is the function is working. Can someone explain to me why it works like that? We are using: 

I need to validate XML using XSD inside TSQL. To make this task semi automated I need to do this inside TSQL function. To make validation I have to set value to XML and if it is not valid I will receive an error. My problem is that inside the TSQL function I can not use . Is this the propper way and if it is even possible to do this? 

EDIT 2: I find the problem. When we used to validate , we sned 1st parameter to be the name. Then in the we extract schema from SQL Server. In our case we have empty string for name, but even we have the error is passed upwards the SQL Server stored procedure. Our function returns so the recors with 0 must be updated with error code. But in this case we receive exception in SQL. My code is: SQL for Update 

I do that using . You can export data from SQL job and then you can zip using that stored procedure. The best way is to run a bat file for zip. REMARK: to use that sp you need that it is allowed (on SQL Server level) and you must have permissions to run it. 

One more very simple solution: use notepad++. Inside there is very good plugin called Poor man's sql formatter. The drawback is that you have to paste inside the . But it is free. There is also a web page, but I did not try it. 

My colleague ask me very simple, but difficult for me question: If I have table with 10 records in trigger and I delete 8 of them how many records will I have in table in trigger? I think it wuold be 10, but I am not sure. 

I dont know if this question is asked - I found similar question - How to enable intellisense, but my case is little different. We have 2 SQL Servers 2012 - one is in the other room, other is in our Data Center. When we write a query on our "next door" SQL Server intellisense working perfectly. When we write a query on out DC SQL Server intellisense is not wokring - in a new window it works from time to time and does not underline wrong table names. In a window with big script does not working at all. The DC server is newer version. SSMS lacks SP. What can cause such issue? Any ideas? 

REMARK: I executed this operation on the old server many times automatically and I never experience such error. ON MIRROR SERVER: ROW 1 in LOG: 

I have no idea what can be the problem. Can anyone give me some direction where to search? In general I have SQL Stored procedure inside which in Clause I call . The function gets 2 strings: one for and other for an make validation. The function is called many times in the query. EDIT: ERROR message: 

I need to return partial result (as simple select) from a Stored procedure before it is finished. Is it possible to do that? If yes, how to do that? If not, any workaround? EDIT: I have several parts of the procedure. In the first part I calculate several string. I use them later in the procedure to make addtional operations. The problem is that string is needed by the caller as soon as possible. So I need to calculate that string and pass it back (somehow, from a select for example) and then continue to work. The caller gets its valuable string much more quickly. Caller is a Web Service. 

I asked question in very blurry manner because I cannot explain in short sentence what is my problem about. In general I have a set of procedures which transforms text and XML. Inside the procedures I have a lot of and variables and a table with column. Inside my data I have special letters (for example ). When I run all the code the special character disappears and is visible as - which mean that I got instead of . In general I got everything ok until the final steps. I got which call stored procedure with ad hoc constructed variable of type . I have into a table which contains field. In this case I got . If I run procedure manually (not in ) I got proper symbol. Any ideas why this happens? I checked all variables and they are . 

MY PROCESS IS FOLLOWING: 1. I make several backups of the Database (Full, File Group and TLog backups). 2. I set DB to (to allow removing read-only of historical file group flag by script). 2a. I remove flag of my Historical File Group. 3. I set DB to to allow normal operation of our software. 4. I update partitions so the data is moved the the historical file group. 5. I repeat steps 2, 2a and 3 in so I can set historical file group READ ONLY again. 6. I make backups again. Does anyone have idea why I receive that error? EDIT: We receive the same issue during the different phase of the procedure. This is the only situation in which mirror breaks down so I suppose the problem is inside the procedure, but I can not figure out why! 

Instead of making zip file of the backup use option of command. It will compress backup and you can use it directly for restore (skipping unzip step). It is supported from SQL 2008 onward (I see you have SQL 2012) and the compression is very good (compared to compression ratio / speed). See BACKUP command for more details. You can check the compression ratio here. 

Is there a way to declare as variable inside a construct: ? I need to make quick validation of using schema which is declared as variable. I suppose there is no way, but I have to ask. If someone can propose some workaround it will be very helpful also. 

I need to make script of XML schema collections in my Database and then insert each xml inside a table field as string. I need to do this to compare current schema collections with the new schema collections after it is regenerated. I have no idea where to start! 

This is the better approach if you need make a lot of queries on Player and list of his friends (this will give speed of queries). If you just need list of names, the other approach is also possible. So you have to think and decide which is better approach for your needs. 

Create a new DB called SERVICE, MAINTANANCE, etc. Inside it create a stored procedures for different steps - drop old DB, create new DB, populate new DB. You can make all that in one procedure also. Create one procedure which will execute others - step by step (if you not implemented all logic in one procedure). Creata a job with permissions - inside it strat main procedure. Or tell DEV team to use main procedure inside new DB (with appropriate permissions). 

P.S. If the question is unclear please let me know via comment. EDIT2: This is the full text of the function: 

I think that it is not good to uprgade only SQL Server. 2005 is out of support so I think you need to upgrade SSRS also. If you update only SQL server you must check you apps, bacuse there are some issues with SQLs between versions. For example we use SQLs generated in concatenated strings and we have some issues when upgrading from 2000 to 2008. In any case you must make test how apps work with the new version the new version. So my answer is NO. 

You can achive this by creating table. In that table you can store all changes from those tables. You have to use to populate data in table. Take into account that if the history table stores all changes you need engine to populate it. Another approach is to have table for each table that you want to observe. In your case . You have to decide when you make design what amount of such info to keep. Of course you can just remove all that columns if you don't care about the info they store.