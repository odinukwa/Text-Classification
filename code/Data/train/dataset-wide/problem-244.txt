It sounds like you have put yourself in a real bind here. From what you have described, it doesn't sound like any sensible person would want to stay, especially if they knew what the 'countryside' looked like before they migrated. With the history of human migration (europeans moving to the United States in the 18th and 19th century, or the current migration crisis in Europe) I think it is hard to argue that people wont try anything to get out of a desperate situation like this. One question that really springs to mind is: Does the city even want people there anymore? It sounds like your story needs 'the crammed city' to work. In that case you should figure out the motivation of the government or the factory owners or whoever for not letting people get out of the city. I can think of three possibilities, each with a problem: 

I don't have that much experience in world building, but one thing I always try to keep in mind is: Why am I creating this world? What do I need it for? If you are just creating a world in your spare time, as a mental exercise, go right ahead and ignore this. If you, on the other hand need it for, say, an RPG or a book, make sure you understand what that product is going to need from your world. One example would be a short story. Since you are trying to tell a story and creating a new world for that purpose, there have to be something that sets it apart from the real world. In that case, I would try and figure out that 'otherness' and identify what you need to get there: Maybe the atmosphere is different or social structures developed in a different way? I hope this helps you. 

People have just enough hope that they can advance through some sort of system of of this squalor, be it education or hard work. A lot of slave societies (like Rome or Caribbean plantation colonies) had some way for slaves to earn their freedom and that helped to keep the 'unpleasantness' of daily life from becoming mutinous feelings. The main problem here is that you are not dealing with overworked people, but people who cannot find employment, and they are in a different mindset. People can't leave, which could be caused by the government preventing them from leaving or spreading misinformation about the 'greener pastures', so that people don't want to go back. The main issue here is why would the government want to keep people at the city, since they seemingly don't need them? Maybe there is something more sinister going on, like a social grand experiment or something along those lines. The problem with that is that it will move the focus of your story away from your protagonist and on to solving the 'mystery', which sounds like it wouldn't serve your story well. 

This is a very interesting question. I would probably draw inspiration from the difference between the armies of the early Roman republic and the ones created by the Marian Reforms, which changed the army from a citizen levy to the professional legions we know today. There was a lot of factors behind the changes, but a few absolutely key factors were the centralization of almost all arable land in the hands of very few people, and the introduction of massive amounts of slave labor. Earlier, the Romans used property requirements, including how much land you owned, to determine who could provide what equipment. Once almost all land was held by the elite, and slaves, captured in military campaigns, could work the land for free, it induced both a manpower shortage in the old system (since fewer people had the necessary wealth to equip themselves) and a manpower abundance for the new system (a LOT of very poor and very desperate citizens). I would make your Counts, Dukes etc. a very wealthy elite and the only land owners. There need to be some reason why farming does not occupy a majority of the potential population (could be slaves, magic or some kind of technology) and a reason for the poor to see military service as the best way out of their misery. They might be forced to fight, but then it more like a slave army, which I would not consider within the parameters given. I would also suggest coming up with a good reason why armies need to be kept standing. Maybe there are a lot of surprise attacks or maybe the armies are need to keep the peace. I did consider a few other alternatives: Maybe the soldiers have some special quality that are hard to identify and lost if not used regularly or maybe the food production is so poor that even fighting medium scale military campaigns can devastate both the attacker and defenders manpower and so engagements are only fought between small groups of skilled fighters to not waste precious life. 

The first few numbers are small enough that the pattern should be easy to spot, but they increase rapidly. There's a simple one-to-one relation between successive pairs of numbers — the next one is 3 times the previous one — and the numbers in this sequence are also recognizable on their own, being the only numbers not divisible by any prime other than 3. The base of the progression can indeed be chosen more or less arbitrarily, but I would suggest that it should preferably be: 

Thus, for base 2 (or base 2n) or base 10 numbers, 3 would be a good choice of base for the progression. If you're using e.g. a base 3 number system, the powers of 2 would make a good test sequence. If you're using, say, base 60 like the ancient Babylonians did, try the powers of 7. 

reasonably small, so that the sequence doesn't grow too fast, a prime, so that each number in the sequence has a simple prime factorization, and not equal to (or sharing a common factor with) the base of your number system, to properly exercise the receiver's decoding system. 

Hit it with a rock. A big rock. Something like Ceres might do, if you could somehow get it into an orbit that hits the moon with sufficient relative velocity. Alas, moving Ceres significantly from its current orbit is likely itself a non-trivial task. A stray Kuiper belt object might be more practical, if only because there are more sufficiently large bodies out there, and also because the long fall from the Kuiper belt to the inner system would naturally give the impactor a highly eccentric orbit that could intersect the Moon at a sharp angle and high velocity difference. You'd still have the problem of getting the object to the inner system in the first place, but I could buy a scenario where a collision (or a near-miss) with another KBO sends the would-be impactor on an unstable orbit leading to an eventual close encounter with Neptune, which, with some good (or bad, depending on how you look at it) luck, might send it towards the inner system and an eventual collision with the Moon. Of course, you could go further afield and have the object come in from the Oort cloud, or even from interstellar space. Most solar system formation models predict a large number of small planetesimals getting scattered out of the system when it forms, so it stands to reason that there must be a sizeable population of stray planets out there in interstellar space, and that they'll occasionally make a near pass to a star such as the Sun. Of course, such encounters are (fortunately) not that common, and most such bodies will just pass through the solar system without hitting anything anyway, but having one fall in and hit the Moon is still perfectly within the realm of possibility. As a bonus, a stray planetesimal could potentially fall in from any direction, even well away from the plane of the ecliptic, which could let you get some quite interesting orbital changes when it hits. In any case, a body smaller than the Moon, passing the Earth at the Moon's distance, isn't going to directly disrupt the Earth to any significant extent (unless you count making a lot of astronomers soil their underwear when they first spot it). Any tidal effects will, by definition, be smaller or comparable to the lunar and solar tides the Earth already experiences, and any gravitational effects on the Earth's orbit should be negligible. The bad news, however, is that anything massive hitting the Moon at high speed is going to scatter off lots of smaller rocks when it hits, some of which will likely hit the Earth. So Earth as a whole might be fine, but you'd likely be looking at some rather big meteor impacts as secondary effects, potentially disrupting the biosphere and any civilization down here. Worse yet, since the scattering from the lunar impact is likely to be rather chaotic and unpredictable, we won't be able to easily predict how many secondary impacts might hit the Earth, or when and where they would hit. 

My favored option is cryogenically freeze them. They take up the least amount of resources, are the easiest to protect (toss them in a lead bunker that doesn't need to be miles deep), and would be the best. You can also use this to lead in to another method, where you freeze them until the surface is not 100% contaminated, and then release them to a lesser containment to prepare themselves. To provide food, I can see hydroponics being big, especially with gray water reuse factored in. You'd need a way to store the water, an area for the food, and then the hydroponics system itself. The planting could be scaled vertically and horizontally to almost any extent you want, allowing for a large number of denizens for your vault. Here's an article about something very similar to this, growing in a bank vault. To provide sleeping quarters, I can see a few problems in accommodating a large population, assuming some kind of resource constraint or wish for costs to be lower. You could have a 3-shift system, whereby each person is assigned a bed, along with 2 others. When your sleep shift is on, you sleep in the bed, and then vacate it for the next person. This allows for an acceptable level of sleep, although a 2 shift system would provide more sleep, at the expense of needing more beds. This allows for the most efficient usage of resources, although at the expense of personalization of anything. As to actually engineering the shelter, you'd probably do best to look at the miners. In particular, a story I enjoy is Virginia City, NV. The miners had to invent a unique way of trussing to be able to mine deep, square set timbering, had to figure out how to pump the water out, generally from a sump. Also a factor during construction and then eventual habitation is the fact that you need to cool the area constantly, because it is quite hot. With the Comstock Lode they used ice baths for the miners, but I believe this would be impractical for your use case. You will also need to provide air when digging, and after the fact. While digging the air can be brought in from the surface, but after the fact you will need recyclers or a large enough supply of compressed oxygen to provide for a fair bit of time. An interesting and relevant subject to read up on is the Comstock Lode. Another interesting tie-in of note is that you can situate these on mineral deposits and use the money from those to at least partially defray the costs of the whole operation. 

With the results being electronically broadcast, that could be your solution. If it's a wireless broadcast, sniff it and attempt to break the encryption I assume would be present. Then you can run your own broadcast in the same vein to send false results, as the broadcasts are linked to the tokens and not the people using the tokens. If it's wired you can do the same, but you can entirely subvert the other votes by putting in a bypass, assuming there is no handshake or you can properly replicate the handshake. Both these methods would require a physical presence and knowledge of the system, but these would likely not be too hard to get. The hardest part in this is breaking the assumed cryptography, which a foreign state would be able to do, or bribing/otherwise cajoling the system designers into giving you the details.