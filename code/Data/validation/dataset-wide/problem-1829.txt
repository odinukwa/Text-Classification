I've got a standalone Windows Server 2003 running SQL Server 2005 and a Windows Server 2003 Active Directory domain controller. Using maintenance plans/SQL Server Agent, I'm trying to write the database dumps from the standalone box to a share on the DC. I know the usual rules about accessing remote shares (e.g. must use a logon account which has proper rights, etc.). In fact, writing the dumps to another non-DC server in the same domain as the DC works fine. I'm trying to set the SQL Server Agent account's logon credentials to "domain\username" (or username@addomainname). If I specify a username in the form of "domain\username, the error I get (regardless of password) is: "The account name is invalid or does not exist, or the password is invalid for the account name specified". If I specify a username in the form of "user@addomainname", the error I get (regardless of password) is: "The specified domain either does not exist or could not be contacted." I've turned on logon failure auditing on the DC and I see no failures in the log, which suggests to me that the machine isn't even trying to authenticate, but rather failing prior to that. I know that users on non-member servers can authenticate to shares on a DC, because doing an interactive logon (e.g. "net use * \dcname\c$ /user:username@addomainname", or using the other form of the username) works fine. The above example is about SQL Server but applies to any Windows service. Why can't the service log on with the domain account, but an interactive logon (drive mapping) using that same account works? 

With Rackspace's (hosting this particular configuration) support, I now understand the situation. The "net use *..." drive mapping example and the service example is an apples to oranges comparison. With the drive mapping case it's just an authentication that's happening. In the service case, I'm actually attempting to run a local process under domain credentials, which by definition isn't possible since the server isn't in the domain. Not in domain = can't execute under domain credentials. The drive mapping works because I'm not attempting to execute a process as the domain account - I'm simply passing the credentials. This restriction applies to any type of process, regardless of it's interactive or service-based. 

You're running the embedded version, which stays read-only mounted to not kill flash media with its limited write lifetime. You can mount to read write by running /etc/rc.conf_mount_rw and when finished, mount back to read only with /etc/rc.conf_mount_ro. If you're running on a hard drive or SSD you can run the full install version, which stays read-write mounted all the time. 

You said you have fixed IPs, but mentioned renewing the WAN. I'm assuming it's DHCP, with your fixed IP assigned as a reservation. Not enough info to offer any suggestions. What's the status of the interface before you renew it? What's in the system log when it's trying to renew its IP? Likely either your connection briefly drops out and your modem assigns you a private IP that can't get anywhere, or your DHCP lease fails to renew for some reason. 

You don't want additional NICs. Just add virtual IPs on WAN for each additional IP. If it's cable service, you often have to power cycle the cable modem after doing so before the IPs will work. 

You can use the static ARP in the DHCP server and only allow defined hosts to get an IP. You'll want to use 2.0 if you go the full static ARP route, there were some issues recently found there in the stable release but it works fine in 2.0. 

Check the /var/etc/racoon.conf that's generated. There are also various SPD-related commands outside of that, you'll have to check the source in /etc/inc/vpn.inc and ipsec.inc. Or just read up on setkey.conf in FreeBSD. 

Maybe preferring old SAs where it shouldn't be? System>Advanced, Misc, "Prefer older IPsec SAs", uncheck that if it's checked. 

I'm guessing your listing of LAN1 and LAN2 as both 192.168.1.0/24 is wrong given the capture shows one is 192.168.16.0 and one is 192.168.67.0 apparently, hopefully both /24s. The static route filtering option has no applicability here. I'm guessing you either have overlapping networks (not a /24 mask on both, maybe /16 on some hosts), or one of the affected systems is dual homed on both networks which causes asymmetric routing. 

You can't NAT like that, it hits IPsec before the NAT. You'll have to use 2.1 and its IPsec NAT capabilities in the phase 2. You can only map a /24 to a /24 so you won't be able to map your entire internal /16 to that /24, only a /24 out of the /16. 

Let's say my users have accounts on some mail server mail.example.com. I currently have my mx record set to mail.example.com and all is good. Now let's say I want to have mails initially delivered to an external service (e.g. Postini. Note that this is not a postini-specific question though). In the normal situation where my mx is set directly to my mail server mail.example.com, sending MTAs will of course look up my MX and send to mail.example.com. In my new situation I'd have my mx set to mx.othermailservice.com and emails would be received there. OtherEmailService.com will then relay the emails (while keeping the return-path header the same) to mail.example.com. Do the emails that are received at mail.example.com after be relayed from the other service "look" any different than emails that go directly to it as would be the case where the mx was set to mail.example.com? 

I recently bought a Cisco RV110W Small Business wireless vpn firewall and I want to open a support case with the Cisco TAC. I assumed small business products came with a support period but I can't determine how to open a support case without a contract. 

My internal subnet is 192.168.1.0/255.255.255.0. I don't understand the warning message since a 10.x.x.1 network can just as easily conflict with a remote network as a 192.168.1.x network can. How shoud I proceed? 

According to Cisco support, QuickVPN connections to this device require that the inside interface of the router be set to a 10.x.x.1 address. Assuming that your LAN isn't 10.x.x.1 this would mean a readdressing of all devices, DNS changes, etc. Ridiculous. They said this was because most of the networks where the QuickVPN clients come from will be 192.168.x.x, so this would conflict. I said that 10.x.x.1 would conflict as well in the case that the remote user was on a 10.x.x.1 and was told that the 10.x.x.1 range was picked because it's used less frequently than 192.168.x.x. So to prevent an conflict between the remote and central networks, the device was hard coded with this requirement. I'm used to Cisco VPNs where the VPN gets one or more unique subnets and NAT does all the magic. I don't understand QuickVPN connections well enough to know how the implementation is different. These restrictions apply to PPTP VPNs as well. 

You can just port forward TCP/UDP 53 to your server on your existing WAN IP, if you aren't already running a DNS server on that IP. But I wouldn't recommend doing that in most cases, it's better to keep your public and private DNS separate. Especially if you're running Active Directory, you'll expose a good deal of information about your internal network to the world if you open the DNS server serving your AD to the Internet. 

Possible, yes. Good idea, eh, probably not. OpenBGPD has stability issues at times, and there are inherent complications in stateful filtering and asymmetric routing. pf also performs poorly under DDoS, likely making it difficult to stay online even with a small scale attack. The network edge where you're doing BGP is the job for a router. I'd do the BGP on routers rather than firewalls, put the firewalls inside a pair of routers (one per ISP, interconnected, for HA). 

You need two things. One, a push route on the OpenVPN server to send the clients a route. push "route 192.168.0.0 255.255.255.0" Then a second phase 2 with the local being 10.1.0.0/24 and remote 192.168.0.0/24, and vice versa on the remote end. 

Exactly as Mark said, they're very much two entirely different products. If you're looking for a proxy server that's tightly integrated with Active Directory and provides a slew of nice functionality in that area, you want TMG. If you need advanced NAT, routing, multi-WAN, flexible cross-platform VPN options, etc. you're somewhere between some, minimal and non-existent functionality with TMG, but pfSense offers a lot in those areas and is widely deployed for those things. Maybe the best option? Use both. TMG inside the network, pfSense at the edge, and you get the best of both worlds. 

What you're describing is fine, and widely done. Your description makes it sound like it's all correct. My first guess is you have the routes wrong on one or more of the connections for site C, like trying to route the same network across two different OpenVPN instances. 

You shouldn't use TCP unless that's your only option, always preferable to tunnel anything in connectionless protocols. Not directly related to the issue, but I would change that to UDP. Doing so would possibly help this problem (though it's probably indicative of some other root cause). The "connection reset" is the cause of the issue, it's a question of why the TCP connection is being dropped or abandoned. If your config kills states on gateway failure, and your gateway monitor isn't reliably replying, it could be repeatedly killing states. Checking a packet capture of the traffic would be telling. The logs you posted don't show any signs of issues with keepalives. I wouldn't touch that, and revert any changes you made related to that. 

You can create a text file containing the computer names you want to scan (1 name per line) and then run the MBSA command line program as follows: 

The question about which is better is completely subjective and I wouldn't even recommend bringing it up. In fact I assume one of the forum moderators will either edit down or close the question in about 4 milliseconds because of this. The "which is better" discussion is HIGHLY specific to your needs, your politics, development and operations skills, preferences, biases and many many more options. It can't be determined by an outsider whether the change makes sense or is a management game -it could be a combination of all or none. This question should be asked to people in your company. Costs are also nearly impossible to compare without significant analysis. Microsoft and Lotus generally sell each corporate deal at a different price, not to mention possible resellers and their discounts, and features you want, number of servers, etc. It's impossible to answer any of this so I recommend directing the questions inward towards your organization. 

The approach we standardized on was to put up a username/password logon web page (in front of the application) which accepts the credentials. When the credentials are submitted, the application would in turn validate those credentials against the directory and then respond accordingly (in a .NET world you could use Forms Authentication $URL$ to force access to the application via this login page). Since the application is doing the credential validation, you get rich information as to the nature of the login failure. In addition, even if the login succeeds but there's relevant information to display to the user, e.g. their password will expire shortly, etc., this provides an opportunity to do so. UPDATE: I forgot to mention that if you adopt this approach, you'll need to allow anonymous access to the IIS application root. This will allow access to the login web page without first attempting the automatic NTLM authentication. It's up to you whether you leave NTLM authentication enabled; perhaps you do want some clients to still automatically log in. 

While a virtual machine guest theoretically doesn't "know" anything about it's host (it generally doesn't even know it's even a VM), you can get information about the host by simply treating the host as just another machine on the network, from the point of view of the guest. This assumes that the guest can see the host on the network. Once you have network access (and proper credentials) to the host you have a number of options to gather information: