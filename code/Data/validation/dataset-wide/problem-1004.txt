I'm setting up a Mirroring study session in separated servers. Everything looks ok, the firewall in my machine is disabled and in the another server it has an inbound\outbound rule to accept port 5022. I could check that both endpoints are created and STARTED in both servers with . 

But today, it shows me "09/15/2015" for all databases, but we had a problem in the cluster, so the backup job didn't run. Why is this query listing "09/15/2015' if there are no backups for today? 

You can create a job that's normally backup your databases. then In a batch file, you can create a folder with datetime, and then copy files to it ( You can do it all via SQL with XP_cmdshell: Use this code in a .bat file: 

--Place the id of the maintenance plan you want to delete into the below query to delete the entry from the log table: 

There something that I have for a long time, to transfer logins with password: You should first create the procedure, and then run it and just copy and paste ( or for sure you can run sp_BlitzErik's script, so it will do it automatically, just don't forget to create a linked server ): 

But, Why is this happening? I'm really curious. if I take RTRIM off, the query is still running slowly. it only works with LTRIM. 

And I would like to know, if this is a query to see databases that are using more CPU, or is this based with past information? I'm trying to know what is causing my server to have high CPU use: 

I'm having problems with logic, to think how can I put this code inside a procedure, as a field.Tried with CTE but failed too. 

I can easily do this with a lot of ways, but I want to pratice cursors. I made this, but it gives me sintax error: 

How can I do this without ? with this solution, I can only list the dabatase i'm connected. I can't understand how can I implement the inside this query: 

I see here that we have a lot of questions about best approach to mirror a single database. I got a new job and people there is under a task to mirror all databases, to a secondary one, in a different city for security (if we lost a server, we have everything on the mirror). 1) to mirror ALL databases, should I repeat the mirroring step for every database? 2)is this the best approach to high availability? I'm thinking about something with raid, so we have a mirror disk that if a disk fails, there is this secondary ( i just forgot what raid is this, im on the cellphone and will search later). I think there will be a lot of requests to mirror the data ( it's not going to be synchronous) if we really chose to mirror ALL databases ( there are more than 200). What would you guys do in this situation? I would even prefer log shipping. I just found this question but i really need to sleep now. Will study it tomorrow. It says about log shipping too. 

But, I can't figure it out how to implement SCHEMA on it. I'm trying something like thi ( this is one of dozens i've tried ): 

Funny part is, when the query uses a different index, it does not use parallelism. Whe it uses this index ( IX_tbReps_cod_perito_primeiro_cod_status ), it uses parallelism. For more information, the query: 

What am I missing? I tried to find some "currency language" or another option with no success. ( The Canada is a little motivation with my objective to move to Canada :) ) 

Why is this happening? I'm using a query to search for "equal indexes" in a particular table. This query is returning a LOT of indexes that I don't even have in the table. 

Place the id of the maintenance plan you want to delete into the below query to delete the entry from the plans table: 

How can I be sure that the customer will run the script, with ansi encode, so we have no problems with those symbols on â, ó and et. We told them to customize their environment to use NSL_LANG = WE8MSWIN1252. TEST QUERY: 

I'm having problems with 2 things: One: This query will need to run with parameters ( because it's already inside a procedure). the real query needs to be this way: 

I'm trying to create a cube, to know a little more about SSAS and as a DBA, be prepared for anything ( almost ). When I'm changing SalesAmmount's to , it doesn't change the values to currency. It keeps the big number values. 

I've been searching all over the internet, but I could only find those dba blogs with lack of information, and some posts saying that the primary database was dropped ( obviously was not ). The primary instance is 2012. The secondary is 2014. the secondary database is in recovering mode. To fix this, should I recreate all log shipping? 

Normally, our log backups has < 10MB size In a big database with a lot of transactions per hour ). But now we have a database, that is storing Images on a Image field. the problem is, the database is HUGE ( it has now 500GB MDF, and 700GB on LDF file )and every log backup has more than 70GB ! What is the best way to store Images on a database? I've seen a lot of posts saying about store the Physical patch of the image on a VARCHAR field. But this way, we need to store the images in some place, right? It will fill the storage in the same way. Or am I wrong? We have full backups every day at 22:00 and log backups every hour. 

EDIT2: We are now using varbinary(max), but it's not solving our problems. It has now almost 700mb after 20 minutes. 

The query just returns the first row after n-1 row(s) For example, if you want to get the second most expensive product (n = 2) in the products table, you just use the following query: 

So, How can I use this 3 union all, inside a procedure, as a single field? The purpose of this, is to select all data from these 3 selects, and grouping by , get the minimum value ( ) I tried to create a procedure and call it inside this procedure, but failed. 

I need to insert all .pdf files from a folder, in a table, according to its number. I could get a list of files ( I have all .pdfs inside a folder ): 

I was thinking about this question ( Here where I work, we have a lot of space so backups are dayli ok ), and i'm thinking about if I was hired in another company, and see that they don't have backups, because there's no space. How can I say " So, we need xTB of storage for the backups".? There are some questions here and stackoverflow saying to use to get an approach. But I think this is wrong because I made 3 tests, and all of them are wrongs. ( In one test, My database has 257MB of size, and on is . When I create a backup, the backup has ). 

Since i started to work as a DBA, i'm making normal backups ( with scripts, ad hoc and etc ). What would be the better solution for a backup? lets say I need to migrate a 2tb database to environment and not affect the environment. I can't find much information about VSS backups. I'm trying to think now as a microsoft DBA and not like a normal DBA anymore. I Just found This good site about VSS backups What is the difference between a shadow copy and a backup? 

I would go with . I could migrate a from a server to another, in 2 minutes. It's going to take some time to create the log shipping config. Basically you will configure your database in the primary server, to use log shipping to the destination server. After this, you just need to stop the application for some time ( minutes ), and change some strings to point the new server with the new database. These are some question I made during this process: Log Shipping "out of sync" but none of the jobs are failing What does 'Could not find a log backup file that could be applied' means on log shipping? It was really easy to solve problems and to configure the environment to the log Shipping. 

But as you can see, files are named after a number ( ). This number is the ID of another table, so, if the PDF file starts with , I need to insert it into the ID . I just would like a start point. I'm trying to create a cursor, looping throug all files, and using left() or substring () function to get the number, inserting it into a variable, and comparing it , like . I need something like a string like this : 

is there a better approach for this? I could find the query, because it was the only statement using TOP.I think it was luck. 

I a user with the name for example. I copied the dump file to another server, and I want to restore it with the name . I tried with no succes ( Im a SQL DBA, so it's hard to understand that schema is the name of the user, that is the database in SQL. I'm slowly learning ) I thought to rename the schema, but As said here, it's not a so good idea. I read somewhere about . Is this right? I could use with users from inside the same server, like, there was the , and I just created the , using remap. 

Just a Little help ( can't post this as a comment ) continuing @sp_BlitzErik's answer, I got some queries with Pinal and Max Vernon ( can't rememebr where ) that say how much MAXDOP you should use: 

Ok, It's listing every day, with sizes and a row_number. What I'm trying to do is to, by MONTH, list the growth rate. I made this query but it's not what I need: 

We have 3 servers ( SQL SERVER 2008 ). Is there a way to backup a database, connected in a different server? Example: i'm on SQL1. I want to do something like this: 

Place the id of the maintenance plan you want to delete into the below query and delete the entry from subplans table: 

yes you can. You can create a job with the query or procedure you want to run. On Schedule you can set it to run Whenever the CPU becomes idle. 

I have a table that i'm using to save the database size, everyday. I have this query using row_number(): 

There's a lot of questions like this one on stackoverflow but none of them is working. tabela1=local 

EDIT2: I could fix this error ( it still shows me this error, but if I run the mirror again, it shows me error .) Using didn't solve the problem. it just restart the task, and errors and errors again. 

This is because the owner of the database ( the login ) was deleted. You should remap the owner of the database, to a login that exists. 

In the secondary instance, and is ok too. It's copying files, but the problem is here. The restore job is reporting this "message" ( the job runs succesfully, so I don't think it's a error): 

I'm searching all over the internet and stack Overflow but every example I find is with only one row, or it just does not work. I have this table: 

I've been reading about Snapshots, and it says you can send catalogs lets say, in a monthly routine. I liked the Idea and i will start to study about this, but can I use snapshot for large databases? Every week I need to backup development database (2tb) and migrate it to test environment. It will be a good idea to make this via snapshot? Performance will not be testes, since it's development, we can wait a lot. 

Wow, I just took off the from the query, and now is at full speed. Just because of this, the query is now using paralelism: 

But , Isn't this an update? Why is this a deadlock? The update 2 shoudnt wait for the first one? this is the graph: 

$URL$ From the official manual. But I don't want to generate manually the properties with the software. I have already all properties of extended properties from almost all tables. Or can I make a Data Dictionary with my good SQL Server Management Studio? I can only see reports from disk usage, performance metrics and etc. This is what I have for now: 

Long story short, if you notice, there are some equal "faturamento". What I need is a of: 1) If is the same, we need the biggest . Ok with this, I can order by 3. 2) If and is the same, I need the biggest . Ok, again, I can do it with Order by 3,4. 3) If everything is the same, but is the same, I need to get the biggest . but if is different ( and faturamento, sequencia, cdcodigobarras is the same ), I need the biggest . Is this something that devs should do in the source code? I really can't think how I can do it with a Query. I've spend some time tryint to do something with count, but even thinking I'm in the right way, I can past this . 

As you can see, appears 2 times. So, how the hell can I list only those columns with more then 1 row_number, but returning all of them ( all duplicates ). in this case. it should return with row_number 1 and 2. 

( i'm not in the server where files are ) Thank you very much. Edit1: I can use this ( After a lot of tests, it's working ): 

how can I use the NULL value inside this concatenation? every answer says something to replace the null with or , But what I need it this: 

I'm trying to create a Trigger, to alter collation of a database on its creation, but how can I catch the database name to use inside the trigger? 

What would be the fastest way to do this? Alter column needs to touch EVERY row right? Is there a way to make this faster? According to questions and answers here, I'm thinking about, create a new table and migrate data, or create a new column with and migrate only the data inside this column and drop the old column. Obs. It's taking more than 3hrs. 

But I use different credentials for AGENT and SQL SERVER. Is this a problem? I've never seen this before. 

Inside it I have all columns from all tables. I need to find only those columns that has a different precision, size or etc. With row_number I got this: 

I'm having problem ( I have problems with cursor since ever and I really need to understand how the hell it works ). I would like to run this command in all databases: 

After some time thinking, this is what I did. probably not the best ( neither the faster ) solution. PLease I would be glad to learn a better way to do this. 

and with this, I can see columns that has a on it, so this one is duplicated ( same column, different size, precision or etc ). 

If theres something I can't learn, is PIVOT. People are trying to teach me this, I'm reading blogs about this but I just can't understand the logic. How can I turn this query , into a pivot? The query: 

Where should I put the database variable for the loop in a cursor? Thanks EDIT1: With this, it runs forever. god dammit: 

EDIT 2: With some tests, I see that these queries shows me last backup date, even if I only have log backups. Is there a way to list "last full backup" date?? 

I created this test index to see if I can't solve the problem but with no success ( is was using the same index before the Image below, only with 2 more fields in the include ): 

Today I got an error ( DTSER_FAILURE ) but I could fix it by editing the maintenance plan ( this error is due to the maintenance plan searching for a database that was deleted, and I was using "selected databases" in the setup ). But over the internet, I read some posts saying that I should . What effects has this option? I read on the Microsoft page that this option has no effect and it is deprecated. 

Well, in this picture the server is pretty good, but almost always we have 90%+ of CPU usage, and using I can't find nothing ( obviously I got a lot of queries, but none of them seems to be hammering the server ).And read\write is pretty low ( everytime ). And thats what i'm having problems to understand. how can a low read/write server be using so much CPU? Does I/O have nothing in common with CPU? I'm trying to know what database is the heaviest one, to migrate it.