I have two BGP routers for DIA with an issue with one provider in that the two links to this provider land on the same SP router. My ethernet handoffs via two separate MetroE links from another provider on behalf on my main provider as the one provider already had fiber to the bldg. If someone could also clear up the ISP terminology when one provider transports services for another, I'd appreciate it. The two circuits terminate L3 with the same SP router, so my two routers each peer with the same provider router. I'm assigned PA space from this SP. I have no issues with outbound load-balancing (or load-sharing as I guess would be more technically accurate). Outbound, I do ECLB at the firewall which picks one of the two edge routers based on a srcip/dstip hash. This particular carrier -- forget about the carrier just providing transport -- is not load-balancing inbound traffic from their one router across the two links to my two routers, and this is the direction where we could use the combined 5x50Mb BW that we have contracted. The SP sees equal paths to us for the same advertised network and essentially just the first path they learn is what becomes the bestpath. I've listed what I'm considering as my options below to get traffic over both circuits, and would like to know what the experts here think is best particularly if you're familiar with typical SP SOPs. Since I have a contract, changing the contract at this time is not an option to have this rebuilt some other way. Allowing in the SP network fixes this, but this applies to all their BGP customers on the same router that I don't think they will allow. At least one option that will work involves static routes, but thatâ€™s not what I would prefer. Below are the options I have considered in my order of preference. 

I may be barking up a tree that doesn't exist but I am trying to find out if there is a way to limit a user or group's access to only a specific VRF. This is a 6500 series switch. Note, I am not trying to control access FROM a VRF. We have an ACS server so if it can't be done with access-class or other commands on the switch itself, I'm wondering if it would be possible to limit access to config commands within a specific VRF. As I write this, I don't think this would really be possible as you can configure an interface that's in a specific VRF without specifying the VRF. The reason I'm asking is we are going to connect to our parent company's WAN using a VRF on our core switch. However, they're saying they need access to whatever equipment they will be peering with. I'm not so worried about the show commands. It's more the configuration commands. If not, we'll just have to count on our logging to let us know something's been changed. 

displays the global routing table plus all the VRF instances. displays the default route for each VRF. This shows the default route for each VRF, including the default VRF. As this IOS 12.4 doesn't show the VRF name when displaying a matching route, a route tag was added on the static routes to help identify their VRF. 

From the perspective of R1 and looking down, sA-sC are "behind" router R1. sB-sC are behind R2, and only sC is behind R3. R1 is only directly connected to sA, R2 is directly connected to sA and sB, and R3 is directly connected to sB and sC. R1 would need either a static route or a dynamic routing protocol to learn about sC and that it should send packets destined for sC to R2 (next-hop). 

RE the question about IOS being installed on out of the box switches. Yes, IOS is installed on out of the box switches. If you buy them all at the same time and the same place (and they're the same model) then they will most likely have the same IOS version. Having the same (or very close) version helps when you're stacking the switches (using the stacking cables in back to turn 2 to 9 switches into a single unit). If the version numbers are too far apart, the switches will not stack and you may need to upgrade the IOS on the older versioned switches manually. There's an auto upgrade feature but it doesn't always work like I would expect it to. :) The point here is that even though the switches might be stacked and act as one unit, each switch still has and needs its own version of IOS. Even when upgrading a stacked set of switches, you need to copy the IOS on to each separate switch. The following link is for 3750 switches and there may be a newer one for 3850s but I doubt it will be much different. This contains all sorts of commands and instructions for stacking upgrading and copying IOS files between switches: $URL$ 

A packet (L3) still needs to be switched as a frame (L2) as it ingresses and egresses interfaces. A router would serve no useful purpose if it makes routing decisions, but has no way to switch packets out. In other words, you can take routing out of switching, but you can't take switching out of routing. 

To get to the heart of your question, a single L3 (layer 3) switch could do what you want and be divided into logical networks via VLANs and the switch will handle the routing between the networks though this is far from an optimal solution. Each VLAN interface will have an IP address configured which becomes the default gateway for all devices it serves. Although not recommended for several reasons with security at the top, your Internet connection could even technically connect on the same switch and work, but that's asking for trouble; I'm sure this is why your consultant recommended at least 1 switch and and 1 router so the two are separated. You really should have a firewall between the two or at least firewalling functionality on your router. Ideally, you would hare pairs routers, firewalls, and switches for redundancy and separation of functions to provide security boundaries. 

Yes, IOS is installed on out of the box switches. If you buy them all at the same time and the same place (and they're the same model) then they will most likely have the same IOS version. Having the same (or very close) version helps when you're stacking the switches (using the stacking cables in back to turn 2 to 9 switches into a single unit). If the version numbers are too far apart, the switches will not stack and you may need to upgrade the IOS on the older versioned switches manually. There's an auto upgrade feature but it doesn't always work like I would expect it to. :) The point here is that even though the switches might be stacked and act as one unit, each switch still has and needs its own version of IOS. Even when upgrading a stacked set of switches, you need to copy the IOS on to each separate switch. The following link is for 3750 switches and there may be a newer one for 3850s but I doubt it will be much different. This contains all sorts of commands and instructions for stacking upgrading and copying IOS files between switches: $URL$ 

You would get two possible DHCPOffer's from the device's internal DHCP pool and the DHCP server defined by the helper-address, but it's up to the client to decide which DHCPOffer to accept and to then unicast a DHCPRequest to the DHCP server of choice. Often clients choose the DHCP server with the fastest DHCPOffer. Unless your device's CPU is bogged down, I would expect typical clients to select the DHCP pool more often than not. You'd expect a little less latency in a L2 operation vs L3 which is required to get to the DHCP server via the helper-address. 

The leading space with the 0 will exclude larger numbers that end in zero. It's better to have ports shutdown (disabled) until they get used. It's risky to change switchport access vlan, for example, on a port that's already up unless you can be certain it's not in use. Output might look like below, telling us that the switchport on g8/18 is disabled with 0 packets since last counter clear while g8/19 is in use (from the absence of the "0 packets input"). 

We have an L2 path between a tape drive and a NetApp. The path goes through 3 switches (a 6509 and two N5K) but the two devices are on the same VLAN. All 10 gig fiber. I found out that while most of the ports in the path are set to an MTU of 9216, one of them (the port on the 6509 core going to the first N5K) is set to 1500. The interface on the other side is set to 9216. We are getting a max of 750 Mpbs between these two systems and I'm thinking this might be the cause. I'm guessing that the systems are using PMTUD in this situation and are using 1500 byte frames when talking to each other but this is causing less optimal data transfer. I've been told by Cisco that to change this, I need to enable system jumbomtu 9216 on the 6509 (it's not set right now) and then set the interface MTU to 9216 as well. Since this is our core switch I'm hesitant to do this without knowing how the system jumbomtu will affect things. Since it has a redundant non-VSS sister, I should make the change on both of them. Would there be any ill effects of making this change? I'm reading things in Cisco's docs that I don't fully understand. For example, the setting jumbo MTU config section says: "For Layer 2 Ethernet ports, you can configure only the global egress LAN port MTU size" <- (which is set using system jumbomtu) There are several L2 (non routed, non SVI) ports configured for both 1500 and 9216 yet the system jumbomtu command is not set on this switch. Does that mean that the 9216 setting on these L2 ports is getting ignored? If I set system jumbomtu 9216, will this effectively change all the L2 ports to an egress MTU of 9216? The Catalyst switches are running IOS 12.2. No CatOS. 

Without physical limitation, I would say 3 racks are ideal, but 2 racks are a minimum. The middle rack is for patch panels of all cable terminations. You don't want any equipment there. The other racks for equipment. 600 terminations with cable management would take up nearly a 42U rack. With redundant equipment, I prefer to rack like devices in opposite racks. This avoids the issue of a single power pole affecting all of your redundancy -- imagine worse case even with dual power supplies going to different PDUs in the same rack with your amp draw on a single PDU > half of it's capacity. Now imagine one of the PDU fails, so all the equipment then pulls double the amps from the remaining PDUs, and since your over budget on your draw, you just tripped the breaker on your redundant PDU and all equipment in that rack goes offline. Having like equipment -- redundant routers, firewalls, agg switches, access switches, wireless LAN controllers, etc -- in different racks would mean a single rack can take it all out. You also avoid someone falling off a ladder or tripping and ripping cables out of your equipment and having a bigger impact than you would like. 

Half duplex can not send and receive at the same time. It also has algorithms to detect and handle collisions (CSMA-CD). Think of it like a walkie talkie or a CB radio, only on a network. Full duplex can send and receive at the same time. Think of it as a telephone. One issue that can arise is sometimes you will see a 100 Mbps half duplex connection which should almost never happen. Since the 100 Mbps connection will most likely not be detecting collisions (it expects to be full duplex), it can be very very slow. This normally happens when one side is hard set to 100/full and the other side is set to autonegotiate. The side that is set at auto will not be able to sense what the duplex is (because the other side is hard set) and use half duplex. So, while you will see 10/half quite often on older equipment, be very very suspect if you see 100/half because you are probably looking at a duplex mismatch.