And here is the results I get in SSRS preview. Not ordered how I want at all :( As far as I can tell, SSRS should support ORDER BY in the dataset query. I also tried removing the ISNULL( ,1000), and the order by still didn't function as desired. Thoughts? 

The problem is, as seen above, the records that have a and of 'IN', have a of "OH". This leads to the output to not contain SUI records for "IN" because no records have an of "IN" Is there any way to force "IN Employee SUI", "IN Employer SUI", etc... to appear with values of 0? There are many states where the State/SDI State and SUI State are different, so I cannot hard-code the logic in there. And here is some dumbed down similar data with my current query. The values aren't important in this question, only forcing the SUI records to appear for the state, "IN' 

The code is going to check to see if there is a collision on If there is, it will scan the table to find the next gap, update all of the values in that range, and leave you a gap to insert the new record into. If no collision is found, the update is skipped. I can't make any guarantee on performance for this, though. I'm sure there are more optimal ways to do it. Here's the dbfiddle - you can see the before and after the update occurs creating a gap for the insert to take place. 

I have a database running under the simple recovery model. The database contains three narrow tables. For two of the tables, data is populated by insert statements. The third table is initially populated by an insert statement, and then the record is completed by an update statement. On average, the database sees 4000 inserts per minute and 2000 updates per minute. It's active, but not exceedingly so. The database has 10GB of space allocated to the transaction log. According to the Disk Usage report / DBCC SQLPERF(LOGSPACE), the log space usage is steadily increasing. Yesterday, usage was at 33% and growing. Overnight, it has increased to 48% and continues to rise. DBCC OPENTRAN returns no open transactions on the database. Nothing stands out to me when I run sp_whoisactive. Another database on the same server, with similar activity, a slightly larger transaction log size, and simple recovery model, is cycling between 0% and 10% usage, which is the behavior that I am used to seeing for the first database. What other steps can I take to determine the cause of this behavior and ensure that the transaction log will not fill up entirely? *Given that I cannot justify the growth in log usage, please assume that "allocating more space to the transaction log" is not a viable solution. 

I am getting a typical group by error that one would see when a field is not in a group by or an aggregate in the select. 

I have a query that is working fantastically, except that I would like to force some records to appear. I am using SqlServer 2016, and this query will ultimately be used in a VIEW and used by SSRS 2016. If the desired behavior can be done in SSRS, or even changing to a PIVOT or some such, I am open to that option. I will put some DDL down below to mimic the example images shown. The data I am pulling from looks like the below: 

I was able to query all of the empty partitions (1, 59-101) without error. In addition, I was able to query partitions 25, 26, and 49-58 without error. When querying partition 39, I received the third error message each time. When querying any other partition, I typically received the first error message, but sporadically received the second error message. After repeating my queries several times, the second error message went away, and I only received the first and third error messages. [The numbering of partitions corresponds to the order in which data was inserted into them, with 2 being the first data-containing partition, and 1 being an empty partition reserved at the beginning.] DBCC CHECKDB also failed, and it returned the following: 

I have a view in which I need to Group By or SUM OVER Partition By year and quarter, but the year and quarter will be computed within the view. I would like to keep it all within a view instead of needing tables and SPs. The goal is to get SUMs by of all records within the first quarter of a year, spanning over multiple years. What I have is: 

After desperately trying everything from restarting and updating SSRS, to clicking my heels three times and throwing salt over my shoulder, the solution is to not use the Microsoft Edge browser. When I switch to using Chrome/Firefox to run my SSRS reports, the behavior is removed. Microsoft Edge version: 38.14393.0.0 

Okay, I think that I'm beginning to understand the nuance of your question. Given that space efficiency is a high priority, I think that you can strike the varchar(max) option from your list. Since your minimum file size is 11K, nothing is going to fit on a single page. All the files will be stored as BLOBs. SQL Server won't compress that (aside from compressing the backup), so you're not going to save any space with that approach. Next, I'm going to make the assumption that processing time can be traded for space efficiency. In that case, I would recommend that you compress the files yourself before storing them and decompress before displaying them. This goes for any solution you end up going with. You should end up with better compression than letting the file system handle it (which applies if you use a Filestream). So I think that your question boils down to Filestream (and possibly FileTable) or VARBINARY(MAX). The standard answer provided by Microsoft is: 

With tons of values in the Cross Apply, it just gets annoying. How can I easily export the definition of an object to have double/quad quotes? 

Below is some sample code and data. I am trying to stay away from only using group by because I have ~30 columns that needed to be included, and having 25 columns in a group by seems...unfortunate. In the data you can see that Payroll 0048 has two records, and the column has a value of , essentially meaning the person was paid in two different checks. Conceptually, I need those two records summed up into one for the end result. However, things are complicated by the fact that I am using a cross apply to fill a business requirement that regular/over-time/double-time are expressed in new records instead of columns. The first select statement is without the SUM and GROUP BY functions to show what the data kind of looks like, but without the desired grouping and sum. The second select statement attempts to get the desired sum and group by, but gives the error. I am just having a heck of a time finding my problem. Could be an oversight or just a brain fart using CROSS APPLY wrong or something. I am also open using another method if there is a better way. As a side note, the is just a hack so I do not have to group by that also. 

This afternoon, another developer reported the same errors on another SQL Server instance that uses this same storage server in the same manner. Restarting that SQL Server instance cleared up the errors for him, as well. In that case, the SQL Server log does not mention transactions being rolled forward, which suggests to me that that may not be related to the issues that I was seeing. The network was functioning, since I was able to pull data from some of the partitions. Given that restarting the instances corrected the problem, there clearly was not any corruption on the remote files causing the issues. So it appears that the data was being written successfully, and it could be read successfully. What caused these errors to occur (i.e. how do I prevent them from recurring), and if they should recur, is there a more graceful way to correct the problem? 

I have a dataset text query and I would like to have an ORDER BY in it. The issue is in SSRS, the ORDER BY is not working as desired. However, when I run the query in SSMS, the output is ordered as I would like. This image is in SSMS where it is working properly. The payroll = 000004 is just to isolate a specific payroll to make it easier to read. The ISNULL(OrderByNumber, 1000) is just to put the total row down at the bottom. 

I need to get some totals output in SSRS that I am having difficulty putting together. I am not sure if I should do the totals for the below query within the query, or in SSRS. The output is going to be presented as one long table in SSRS. I have some example DDL and fake desired output below, but to describe what I am doing, here is a quick snapshot of what I am trying to mimick in SSRS.