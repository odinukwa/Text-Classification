Usually at this point, the WLC will retransmit the M1, and then the second time the client sends its M2, it will not have an invalid MIC, and the key exchange will succeed. Conditions:Windows 7 Clients connecting to wireless network with WPA2/AES with EAP, and session timeout enabled on the WLAN. This problem is seen with all client chipsets. Workaround: Use WPA1 or Disable session timeout. This problem can be mitigated by reducing the EAPOL key retransmission timeout (e.g. "config advanced eap eapol-key-timeout 300") Do be aware that reducing this value might negatively impact key negotiations with some very old and slow clients. More Info:How to reproduce: 

In RSTP when the topology is synchronized, the non-root switches will not exchange BPDUs unless one of the links change. If that happens, a new synchronization process starts. The synchronization process is as follows: RSTP protocol’s fast convergence depends on the use of point-to-point links connecting switches. In order to quickly transition a designated port into non-discarding state, the upstream switch needs to make sure that the downstream neighbor agrees with that idea. This constitutes the process known as handshake (or proposal/agreement): 

This error is caused by Windows 7 clients specifically. Cisco is aware of the problem, but has never fixed the issue on the controller. Since the Cisco bug tool requires access, i've posted the answer as described by Cisco. In our own setup with 11 to 12.000 clients a day, we get tons of these errors on our WLC 8540. The bug can be found here: $URL$ Case description: Symptom: Windows 7 clients connecting to wireless networks with WPA2 and session timeout may get disconnected during the key exchange after reauthentication. This is because on the re-keying process the Win7 clients are sending message M2 with what the WLC considers to be a MIC error. "debug client" on the WLC will show messages similar to the following: 

You can use several different forms of transfer to the switch. I just added ftp as an example. Upgrading the software will automatically upgrade any modules or other hardware on the switch. The system will decide if an upgrade is necessary. Typically it's done if a module has bugged firmware or lacks security features or bugs etc. The upgrade procedure is carried out upon reboot by the software upgrade process. Kickstart. 

I can hereby confirm that, disabling Smart Install will prevent this vulnerability. Before disabling: 

If you have multiple IP addresses on your VTP server, the Local updater will use the first IP address found on your switch/router. If you utilize you will see the first interface VLAN 7 has the IP address 155.1.7.7. If you remove the interface or IP address the local updater will use the next interface in line. 

The TCP layer packages the data into packets. A header that’s added to the data includes source and destination addresses, a sequence number, an acknowledgment number, a check sum for error detection and correction, and some other information. The header is 20 octets (octet = 8 bits) grouped in 32-bit increments. Source: $URL$ 

As written the queues are the same on this module and therefore we can use the same policy for both input and output. 1p7q4t basically means: 1 priority queue, 7 normal queues, where all 7 normal queues have 4 thresholds. You can get more info by searching for the module name and queueing. This module, the C6800-16P10G is explained in this link: $URL$ See table 1, Queues. Firstly we need to create the class-maps, that will be used for all policy-maps. This will match the DSCP values for the individual classes that matches the classes from Auto-QoS SRND4. Notice that the class-maps are created as lan-queueing with the match-all statement, which functions like AND/OR in programming. match-all=AND & match-any=OR. Check the following configuration guide; Cisco Campus QoS design simplified, where configuration examples are provided per different modules at the bottom of the presentation: $URL$ 225 pages, link is slow. Creating class-maps (Global configuration): 

Highest priority (number) wins and will be master. Cisco PowerStack: If you want to use power stacking, then the concept is also the same: Cable: 

When connecting the Core to the MPLS ISP, we want to remark the traffic into 5 classes (Because this is what our ISP supports). This is so, that the traffic will be prioritized through the MPLS to all the locations in the topology (See drawing for reference). Your ISP might be different and therefore the remarking should be made so it fits your design. The following example is how you remark all traffic into 5 classes. You need to copy the auto generated Auto-QoS "AutoQos-4.0-Output-Policy" policy-map and then create a new one. You HAVE to use the same class-maps as generated by Auto-QoS. If you try to create your own they will be ignored, therefore the same class-maps are used and the marking is made from those classes: 

The only supported method of upgrading is install all from Release 6.0(2)U6(3) due to the need to upgrade the BIOS. Without the Release 7.0(3)I7(1) BIOS, the 7.0(3)I7(1) image will not load. Link to article: $URL$ 

Rapid Spanning Tree Protocol (RSTP) is an enhancement of the original STP 802.1D protocol. The RSTP 802.1w protocol is an IEEE open implementation. Cisco has its own proprietary implementation of RSTP, that includes the benefits of its Per-VLAN spanning tree protocols, called Rapid-PVST+. Rapid-PVST+ and RSTP are important enhancements to the original STP protocol because they can switch ports from blocking to forwarding without relying on timers, execute spanning tree calculations and converge the network faster than STP. In STP, network convergence can take up to 50 seconds, with RSTP and Rapid-PVST+ network convergence can happen in just over 6 seconds. In RSTP and Rapid-PVST+, switchports transition from discarding (blocking) to forwarding based solely on a switch-to-switch proposal and agreement process, using BID priority, instead of having to also wait for timers. RSTP includes many of Cisco’s earlier proprietary 802.1D enhancements. It is also backwards compatible with STP and can work with legacy switches running STP. RSTP and its variants are widely implemented so it is beneficial to understand a little about how RSTP works. STP Port Roles and Port States Root Port – port that is closest to the root bridge. It goes directly to the forwarding state. Designated Port – only one designated port allowed per network segment (switch-to-switch link), this can either be an alternate port and a designated port, or a root port and a designated port. When there are two designated ports in the same segment the proposal and agreement process will result in one of them becoming an alternate (discarding) port. In this way designated ports make the most use of the proposal and agreement process. A designated port will eventually be a forwarding port though it can temporarily transition to the listening (discarding) state during the proposal and agreement process. Alternate Port – available to transition to designated and forwarding if needed, otherwise discarding (blocking) Backup Port – used with a redundant switch-to-switch port link. Is in the discarding state. 

IP default gateway should only be used when IP routing is disabled on the Cisco router. For instance, if the router is a host in the IP world, you can use this command to define a default gateway for it. You might also use this command when your low end Cisco router is in boot mode in order to TFTP a Cisco IOS Software image to the router. In boot mode, the router does not have IP routing enabled. IP routing is normally needed and there are other methods of achieving the goal: IP default-network Unlike the ip default-gateway command, you can use ip default-network when ip routing is enabled on the Cisco router. When you configure ip default-network the router considers routes to that network for installation as the gateway of last resort on the router. For every network configured with ip default-network, if a router has a route to that network, that route is flagged as a candidate default route. IP route 0.0.0.0 0.0.0.0 Creating a static route to network 0.0.0.0 0.0.0.0 is another way to set the gateway of last resort on a router. As with the ip default-network command, using the static route to 0.0.0.0 is not dependent on any routing protocols. However, ip routing must be enabled on the router. Summary Use the ip default-gateway command when ip routing is disabled on a Cisco router. Use the ip default-network and ip route 0.0.0.0 0.0.0.0 commands to set the gateway of last resort on Cisco routers that have ip routing enabled. The way in which routing protocols propagate the default route information varies for each protocol. Cisco Configuring a Gateway of Last Resort Using IP Commands: $URL$ 

There are perfectly explained guides written by Wireshark itself and the community on Wireshark wiki. The information you are looking for can be found on the following links: $URL$ $URL$ 

QoS on the access layer The configuration is very simpel and straight forward, when using Auto-QoS. Remarking traffic and sending that to the MPLS ISP is a bit more complicated, but i will showcase examples below. All access switches are setup with Auto-QoS, where all ports both access and trunk/uplinks are trusted with DSCP. Observe the following QoS table, where all values for DSCP, CoS, ToS etc. are setup in a table. This gives a good overview of the selected classes and the structure in which i'm trying to accomplish in my design: 

Port range is Gi0/1-14 and Ten0/1-2 - if you add a normal SFP to the SFP+ ports, then Ten0/1 becomes Gi0/15 and Ten0/2 becomes Gi0/16. Example: 

As you can see on the drawing, keep one switch as the middle of the star and then connect all the other switches to this one. If you need to interconnect via fiber, you might need to use two switches as the middle of the star topology. 

The most commonly used network topology is a Star topology. This is where all hosts are connected to a central switch or another network device. In the case of more switches, they should all be interconnected via trunk and all hosts should be equally divided between the switches. If there's a larger distance between the switches, for instance, you have one on each floor in an office building, then they can still interconnect, but typically via fiber. Just remember, that if the same VLAN is used throughout a building you might run into problems with not enough IP addresses or the broadcast domain being too large, hence creating too much broadcast traffic, which eventually could disturb the users. Star topology example drawing: 

Channels 1, 6, and 11 are spaced far enough apart that they don’t overlap. On a non-MIMO setup (i.e. 802.11 a, b, or g) you should always try to use channel 1, 6, or 11. If you use 802.11n with 20MHz channels, stick to channels 1, 6, and 11 — if you want to use 40MHz channels, be aware that the airwaves might be congested, unless you live in a detached house in the middle of nowhere. In your case selecting 13 would be perfect, since most are at 1 and 6 as you wrote. Setting channels as far as possible away from other active networks. Good read on SuperUser: $URL$ 

Now we need to create a policy map and remark the traffic if a match is found. You can rename the policy map to whatever you like. 

The types of applications used and the traffic patterns on your network. Traffic characteristics and needs of your network. Is the traffic bursty? Do you need to reserve bandwidth for voice and video streams? Bandwidth requirements and speed of the network. Location of congestion points in the network. Would AutoQoS be sufficient to accomplish your goals? 

Your ingress traffic from the internet of 100 Mbps will not be shaped. But if the traffic will be routed/NATed/etc. the egress will be shaped to 50 Mbps. Your output traffic to the internet of 99.07 Mbps will be shaped to 50 Mbps. Your IPsec VPN will be capped at 50 Mbps egress. 

There is a mismatch in speed between Router4, Fa5/0 and Router8, Gi8/0. Router8 Gi8/0 was configured with a Gbit GBIC module, which was connected to a 100 Mbit FX GBIC module. The mismatch caused the connectivity problems. 

This will create a table-map of CoS to DSCP, but the values do not all comply to the Auto-QoS SRND4 standard (CoS 7 is mapped to 54, which should be 56). Therefore you will need to remove the table-map and replace it with the following: 

Hopefully this helps people save some time. Cisco has very poor documentation on proper configuration of these switch modules so I'm not surprised TAC gave the nonsense answer of "use an external cable". Source: $URL$ 

That's it for the 3650 and 3850 Series. Enabling QoS on the 6500 Series The 6500 Series does not support Auto-QoS SRND4. It's very basic and it only understands layer 2 CoS values for VoIP. This means you need to configure all QoS from the ground up, to fit the Auto-QoS infrastructure from the access layer. QoS needs to be configured based on which module is installed on the chassis. You also need to create policy-maps for both ingress and egress (input/output). The Supervisor only understands CoS between the module and the ASIC in the chassis. To activate Auto-QoS for CoS, you need to utilize the following global command: 

in configuration mode will give you live logging on a SSH or Telnet access. you can set the logging level after monitor, for instance will give you everything. On console access it's as an example. Use in front of the command to disable. 

The router’s NVRAM used to contain the startup configuration file only, but this is no longer strictly the case. Recent IOS releases also use the same NVRAM space to store information such as private keys for SSH or IPSec (private-config), and interface numbers for SNMP (ifIndex-table). 

The above shows a segment of a network configured for HSRP. Each router is configured with the MAC address and IP network address of the virtual router. Instead of configuring hosts on the network with the IP address of Router A, you configure them with the IP address of the virtual router as their default router. When Host C sends packets to Host B, it sends them to the MAC address of the virtual router. If for any reason, Router A stops transferring packets, Router B responds to the virtual IP address and virtual MAC address and becomes the active router, assuming the active router duties. Host C continues to use the IP address of the virtual router to address packets destined for Host B, which Router B now receives and sends to Host B. Until Router A resumes operation, HSRP allows Router B to provide uninterrupted service to users on Host C’s segment that need to communicate with users on Host B’s segment and also continues to perform its normal function of handling packets between the Host A segment and Host B. Configuration for example: 

Additional event triggers for Cisco and third-party devices are user-defined MAC address groups, MAC authentication bypass (MAB) messages, IEEE 802.1x authentication messages, and Link Layer Discovery Protocol (LLDP) messages. LLDP supports a set of attributes used to discover neighbor devices. These type, length, and value attributes and descriptions are referred to as TLVs. LLDP-supported devices use TLVs to receive and send information. This protocol advertises details such as device configuration information, capabilities, and identity. Auto Smartports uses the LLDP system capabilities TLV as the event trigger. Use the event trigger control feature to specify if the switch applies a macro based on the detection method, device type, or configured trigger. For devices that do not support CDP, MAB, or 802.1x authentication, such as network printers, LLDP, or legacy Cisco Digital Media Players, you can configure a MAC address group with a MAC operationally unique identifier (OUI)-based trigger. You map the MAC address to a built-in or user-defined macro that has the desired configuration.